<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„¸ë‚˜ë¦¬ ë£¨ë¹„ ì«„ì‘ ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    label, h3, h4, h1, select, input[type="checkbox"] {
      -webkit-user-select: none; /* Safari */
      -moz-user-select: none;    /* Firefox */
      -ms-user-select: none;     /* IE/Edge */
      user-select: none;         /* í‘œì¤€ */
    }

    h1, h3, h4 {
      color: #333;
    }

    .section {
      margin-bottom: 10px;
    }

    label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 8px 0;
    }

    input[type="number"],
    select {
      flex: 1;
      padding: 6px;
      margin-left: 10px;
    }

    input[type="checkbox"] {
      margin-right: 10px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
    }

    button:hover {
      background-color: #45a049;
    }

    .checkbox-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 20px;
      flex-direction: row;
    }

    @media (max-width: 480px) {
      label {
        flex-direction: nowrap;
        align-items: middle;
      }

      input[type="number"],
      select {
        margin-left: 0;
        width: 100%;
        margin-top: 5px;
      }

      button {
        width: 100%;
      }

      .checkbox-row {
        flex-direction: nowrap; /* ì„¸ë¡œ ë°°ì—´ë¡œ ì „í™˜ */
        gap: 10px;
      }
    }
  </style>
</head>
<body>

  <h1>ì„¸ë‚˜ë¦¬ ë£¨ë¹„ ì«„ì‘ ê³„ì‚°ê¸°</h1>

  <div class="section" style="display: flex; gap: 20px;">
    <h3>ì›”ì •ì•¡ ì—¬ë¶€</h3>
    <div class="checkbox-row">
        <label><input type="checkbox" id="rubySubscription"> ë£¨ë¹„ ì›”ì •ì•¡</label>
        <label><input type="checkbox" id="keySubscription"> ì—´ì‡  ì›”ì •ì•¡</label>
    </div>
  </div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3>ì„¸ë‚˜íŒ¨ìŠ¤</h3>
    <label><input type="checkbox" id="senaPass"> ì„¸ë‚˜íŒ¨ìŠ¤ êµ¬ë§¤í•¨</label>
  </div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3>ì—´ì‡ ìƒì êµ¬ë§¤</h3>
    <label for="keyBoxRuby">
      ì‚¬ìš©í•  ë£¨ë¹„:
      <select id="keyBoxRuby">
        <option value="0">êµ¬ë§¤ ì•ˆí•¨</option>
        <option value="50">50ë£¨ë¹„ë‹¨</option>
        <option value="80">80ë£¨ë¹„ë‹¨</option>
        <option value="100">100ë£¨ë¹„ë‹¨</option>
        <option value="120">120ë£¨ë¹„ë‹¨</option>
      </select>
    </label>
  </div>

  <div class="section">
    <h4>ìƒì ì—ì„œ êµ¬ë§¤í•  ì—´ì‡  ê°œìˆ˜</h4>
    <label for="honorKeyCount">
      ëª…ì˜ˆìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <input type="number" id="honorKeyCount" min="0" max="7" placeholder="ì˜ˆ: 3">
    </label>

    <label for="guildKeyCount">
      ê¸¸ë“œìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <input type="number" id="guildKeyCount" min="0" max="7" placeholder="ì˜ˆ: 2">
    </label>
  </div>

  <div class="section">
    <h3>í•˜ë£¨ ë ˆì´ë“œ í”Œë ˆì´ íšŸìˆ˜</h3>
    <label for="raidCount">
      ë ˆì´ë“œ íšŸìˆ˜:
      <input type="number" id="raidCount" min="0" placeholder="ì˜ˆ: 10">
    </label>
  </div>

  <div class="section">
    <h3>ì´ë ¥ì „ í‹°ì–´</h3>
    <label for="conquestTier">
      í‹°ì–´ ì„ íƒ:
      <select id="conquestTier">
        <option value="none">ì„ íƒ ì•ˆí•¨</option>
        <option value="common">ì¼ë°˜</option>
        <option value="advanced">ê³ ê¸‰</option>
        <option value="rare">í¬ê·€</option>
        <option value="legend">ì „ì„¤</option>
      </select>
    </label>
  </div>

  <!-- âœ… ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  í¬í•¨ ì—¬ë¶€ -->
<div class="section" style="display: flex; gap: 20px;">
  <h3>ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  í¬í•¨</h3>
  <label><input type="checkbox" id="includeExpeditionKey" checked> í¬í•¨í•˜ì—¬ ê³„ì‚°</label>
</div>

  <div class="section">
    <button onclick="calculateProfit()">ğŸ’° ë£¨ë¹„ ìˆœì´ìµ ê³„ì‚°í•˜ê¸°</button>
    <h3>ğŸ“† 2ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit2w">0</span> ë£¨ë¹„</h3>
    <h3>ğŸ“† 4ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit4w">0</span> ë£¨ë¹„</h3>
    <h3>ğŸ“ˆ í•˜ë£¨ í‰ê·  ë£¨ë¹„ ìˆœì´ìµ: <span id="avgProfit">0</span> ë£¨ë¹„</h3>
    <h4>ğŸ‘¥ 2ì£¼ ë™ì•ˆ í•„ìš”í•œ ì«„ ìˆ˜: <span id="heroCount">0</span> ë§ˆë¦¬</h4>
    <h4>ğŸ“Š í•˜ë£¨ í‰ê·  í•„ìš”í•œ ì«„ ìˆ˜: <span id="avgHeroCount">0</span> ë§ˆë¦¬</h4>
  </div>
<script>
function calculateProfit() {
  const rubySub = document.getElementById("rubySubscription").checked;
  const keySub = document.getElementById("keySubscription").checked;
  const senaPass = document.getElementById("senaPass").checked;
  const honorCount = parseInt(document.getElementById("honorKeyCount").value) || 0;
  const guildCount = parseInt(document.getElementById("guildKeyCount").value) || 0;
  const keyBoxRuby = parseInt(document.getElementById("keyBoxRuby").value) || 0;
  const raidCountPerDay = parseInt(document.getElementById("raidCount").value) || 0;
  const conquestTier = document.getElementById("conquestTier").value;
  const includeExpeditionKey = document.getElementById("includeExpeditionKey").checked;

  function getKeyBoxRubyCostPerDay(rubyTier) {
    let cost = 0;
    if (rubyTier >= 50) cost += 50 * 20;
    if (rubyTier >= 80) cost += 80 * 50;
    if (rubyTier >= 100) cost += 100 * 50;
    if (rubyTier >= 120) cost += 120 * 50;
    return cost;
  }

  function getConquestRuby(tier, weeks) {
    if (weeks < 2) return 0;
    if (tier === "legend") return 6400 * (weeks / 2);
    if (tier === "rare") return 3400 * (weeks / 2);
    if (tier === "advanced") return 1400 * (weeks / 2);
    if (tier === "common") return 200 * (weeks / 2);
    return 0;
  }

 function compute(period) {
  const days = period * 7;
  const weeks = period;

  // ğŸ”¹ ì—´ì‡  ìˆ˜ê¸‰
  const naturalKeyPerDay = keySub ? 720 : 480;
  const totalNaturalKeys = naturalKeyPerDay * days;
  const keySubKeys = keySub ? (period === 2 ? 1120 : 2240) : 0;
  const keysFromSenaPass = senaPass ? (period === 2 ? 540 : 1080) : (period === 2 ? 240 : 480);
  const keysFromDailySources = (60 + 60) * days; // ì¼ì¼ì˜ë¢° + ê¸¸ë“œì¶œì„
  const keysFrom300Attendance = period === 2 ? 240 : 480; // 300ì¼ ì¶œì„í‘œ
  const keysFromShop = (honorCount + guildCount) * 60 * weeks; // ëª…ì˜ˆ & ê¸¸ë“œ ìƒì 
  const keysFromKeyBox = ((1 + 
    (keyBoxRuby >= 50 ? 20 : 0) +
    (keyBoxRuby >= 80 ? 50 : 0) +
    (keyBoxRuby >= 100 ? 50 : 0) +
    (keyBoxRuby >= 120 ? 50 : 0)) * 60) * days;

  const totalKeysBeforeRaid = totalNaturalKeys + keySubKeys + keysFromSenaPass +
    keysFromDailySources + keysFrom300Attendance + keysFromShop + keysFromKeyBox;

  // ğŸ”¹ ë ˆì´ë“œ ì°¨ê°
  const raidKeysUsed = raidCountPerDay * 6 * days; // ë ˆì´ë“œì— ì‚¬ìš©ë˜ëŠ” ì—´ì‡  ìˆ˜
  const keysForCholjak = totalKeysBeforeRaid - raidKeysUsed; // ë ˆì´ë“œ ì—´ì‡  ì°¨ê° í›„ ì«„ì‘ìš© ì—´ì‡ 

  // ğŸ”¹ ì •í™•í•œ ì«„ì‘ì›ì •ëŒ€ ë£¨í”„ ê³„ì‚° ë°©ì‹ ì ìš©
  const externalRuns = keysForCholjak / 6; // ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  ì´ì™¸ ì—´ì‡ ë¡œ ì«„ì‘ëŒë¦¬ëŠ” íšŸìˆ˜
  let totalCholjakKeys = keysForCholjak;
    if (includeExpeditionKey) {
      const choljakQuestKeys = (externalRuns / 2115) * 270;
      totalCholjakKeys += choljakQuestKeys;

      console.log("ì›ì •ëŒ€ ì—´ì‡  ë³´ìƒ:", choljakQuestKeys);
    } else {
      console.log("ì›ì •ëŒ€ ì—´ì‡  í¬í•¨í•˜ì§€ ì•ŠìŒ");
    }

  // ğŸ”¹ ì«„ì‘ ë£¨ë¹„ ìˆ˜ìµ
  const keysPerRun = rubySub ? 60 : 66;
  const runs = Math.floor(totalCholjakKeys / keysPerRun);
  const heroCount = runs * 4;
  const rubyFromCholjak = runs * 80;

  // ğŸ”¹ ê¸°íƒ€ ë£¨ë¹„ ìˆ˜ê¸‰
  const rubyFromRubySub = rubySub ? (days * 200 + (period === 2 ? 165 : 330)) : 0;
  const rubyFromKeySubBonus = keySub ? (period === 2 ? 100 : 200) : 0;
  const rubyFromSenaPass = senaPass ? (period === 2 ? 1450 : 2900) : (period === 2 ? 250 : 500);
  const rubyFromDailyQuest = 100 * days;
  const rubyFromFreeShop = 30 * days;
  const rubyFromWeekend = 100 * weeks;
  const rubyFromConquest = getConquestRuby(conquestTier, weeks);

  const totalRubyIncome = rubyFromCholjak + rubyFromRubySub + rubyFromKeySubBonus +
    rubyFromSenaPass + rubyFromDailyQuest + rubyFromFreeShop + rubyFromWeekend + rubyFromConquest;

  // ğŸ”¹ ë£¨ë¹„ ì§€ì¶œ
  const rubySpentPerDay = getKeyBoxRubyCostPerDay(keyBoxRuby);
  const rubySpent = rubySpentPerDay * days;

  const netProfit = totalRubyIncome - rubySpent;

  console.log("ë ˆì´ë“œ ì°¨ê° ì „ ì—´ì‡ :", totalKeysBeforeRaid);
  console.log("ìì—°íšŒë³µ ì—´ì‡ :", totalNaturalKeys);
  console.log("ì›”ì •ì•¡ ì—´ì‡ :", keySubKeys);
  console.log("ì„¸ë‚˜íŒ¨ìŠ¤ ì—´ì‡ :", keysFromSenaPass);
  console.log("ì¼ì¼ì˜ë¢° & ê¸¸ë“œì¶œì„:", keysFromDailySources);
  console.log("300ì¼ ì¶œì„í‘œ ì—´ì‡ :", keysFrom300Attendance);
  console.log("ìƒì  ì—´ì‡ :", keysFromShop);
  console.log("ìƒì  ì—´ì‡  ìƒì:", keysFromKeyBox);
console.log("ì«„ì‘ì— ì“¸ ì—´ì‡ :", keysForCholjak);
console.log("ì«„ì‘ ì´ ë£¨ë¹„:", rubyFromCholjak);
  return {
    netProfit,
    heroCount
  };
}

  const result2w = compute(2);
  const result4w = compute(4);

  document.getElementById("profit2w").innerText = Math.floor(result2w.netProfit).toLocaleString();
  document.getElementById("profit4w").innerText = Math.floor(result4w.netProfit).toLocaleString();
  document.getElementById("avgProfit").innerText = Math.floor(result2w.netProfit / 14).toLocaleString();
  document.getElementById("heroCount").innerText = Math.floor(result2w.heroCount).toLocaleString();
  document.getElementById("avgHeroCount").innerText = Math.floor(result2w.heroCount / 14).toLocaleString();
}

    
</script>
</body>
</html>
