<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì«„ì‘ ê³„ì‚°ê¸°</title>
  <style>
    @font-face {
    font-family: 'Gyeonggi_Title_Medium';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2410-3@1.0/Title_Medium.woff') format('woff');
    font-weight: 300;
    font-style: normal;
}

    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      padding : 15px;
      margin-left: auto;
      margin-right: auto;
    }

    label, h3, h4, h1, select, input[type="checkbox"] {
      -webkit-user-select: none; /* Safari */
      -moz-user-select: none;    /* Firefox */
      -ms-user-select: none;     /* IE/Edge */
      user-select: none;         /* í‘œì¤€ */
    }

    h1, h3, h4 {
      font-family: 'Gyeonggi_Title_Medium';
      color: #333;
    }

    .section {
      margin-bottom: 10px;
    }

    label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 8px 0;
    }

    label[for="checkboxlabel"] {
      cursor: pointer;
    }

    input[type="number"],
    select {
      flex: 1;
      padding: 6px;
      margin-left: 10px;
      cursor: pointer;
    }
    
    input[type="number"] {
      cursor:text;
    }

    input[type="checkbox"] {
      margin-right: 10px;
      cursor: pointer;
    }

    button {
      font-family: 'Gyeonggi_Title_Medium';
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    .resetbutton {
      background-color: #ccc; 
      color: #333;
    }
    
    .resetbutton:hover {
      background-color: #b4b4b4; 
    }

    .checkbox-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 20px;
      flex-direction: row;
    }

    .overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4);
  display: none;
  justify-content: center;
  align-items: center;
  animation: fadeOut 0.2s ease forwards;
  z-index: 1000;
}

.overlay.show {
  display: flex;
  animation: fadeIn 0.2s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

.assumption-box {
  background-color: #fff;
  padding: 20px;
  border-radius: 10px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  position: relative;
  animation: fadeIn 0.2s ease forwards;
}

.assumption-box h3 {
  margin-top: 0;
}

.assumption-box ul {
  padding-left: 20px;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 20px;
  cursor: pointer;
}

.title-wrapper {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: nowrap;
  gap: 10px;
  padding: 15px 60px;
  white-space: nowrap;
  overflow: hidden;
}

.title-wrapper h1 {
  font-size: clamp(38px, 5vw, 40px); /* í™”ë©´ í¬ê¸°ì— ë”°ë¼ ìë™ ì¡°ì ˆ */
  margin-bottom: 10px;
  flex-shrink: 1;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
}

.assumption-button {
  background-color: #777;
  transition: background-color 0.15s ease-in-out;
  font-size: 14px;
  padding: 7px 10px;
  white-space: nowrap;
  max-width: 120px;
  min-width: 80px;
  width: auto;
  flex-shrink: 0;
  margin-top: 10px;
}



.assumption-box .credit {
  position: absolute;
  bottom: 10px;
  right: 10px;
  font-size: 13px;
  color: #999;
}

.assumption-button:hover {
      background-color: #e06040;
    }

    .checkbox-label {
      cursor: pointer;
    }

    #raidOver11Level {
      margin-left: 15px;
    }
    .button-column {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 10px;
  align-items: flex-start; /* ì™¼ìª½ ì •ë ¬ (ì›í•˜ë©´ centerë¡œ ë³€ê²½ ê°€ëŠ¥) */
}

/* ì…ë ¥ ìƒìë¥¼ ê°ì‹¸ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        #keyBoxCount_container {
            display: none;
            margin-left: 10px;
        }

        #premiumOption {
    display: none;
  }

  #openSubModal, #openSenaPassModal, #openRubyToUseModal {
    cursor: pointer;
    color: #333;
    transition: color 0.15s ease-in-out;
  }

  #openSubModal:hover, #openSenaPassModal:hover, #openRubyToUseModal:hover {
    cursor: pointer;
    color:#e06040
  }

.mobile-break {
  display: inline;
}
.mobile-br {
    display: none;
  }

    @media (max-width: 480px) {
      .rubyuse {
        line-height: 24px;
      }

      label {
        flex-direction: nowrap;
        align-items: center;
        vertical-align: middle;
      }

      input[type="number"],
      select {
        margin-left: 5px;
        width: 100%;
        margin-top: 5px;
      }

      button {
        width: 100%;
      }

      .title-wrapper {
        padding: 8px 25px;
        line-height: 40px;
        margin-left: 8%;
        margin-top: -2%;
        letter-spacing: 0.25em;
      }
      .checkbox-row {
        flex-direction: nowrap; /* ì„¸ë¡œ ë°°ì—´ë¡œ ì „í™˜ */
        gap: 10px;
      }
      .mobile-break {
    display: none;
  }
  .mobile-br {
    display: inline;
  }
    }
  </style>
</head>
<body>

  <div class="title-wrapper">
    <h1>ì„¸ë‚˜ë¦¬ <span class="mobile-break">ì«„ì‘</span> <span class="mobile-br"><br></span> ê³„ì‚°ê¸°</h1>
    <div class="button-column">
      <button id="showAssumption" class="assumption-button">ì „ì œì¡°ê±´</button>
      <button id="showIncludedItems" class="assumption-button">ê³„ì‚° í¬í•¨ í•­ëª©</button>
    </div>
  </div>

  <div id="assumptionOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn">&times;</span>
      <h3>ğŸ“Œ ê³„ì‚° ì „ì œì¡°ê±´</h3>
      <ul>
        <li>ì«„ì‘ì€ ëª¨í—˜ ì¼ë°˜ 14ì˜ì§€ ì´ìƒ, ì „ë³µë¥  0% ê¸°ì¤€</li>
        <li>ì—´ì‡ ë¥¼ ìµœëŒ€ ë³´ìœ ê°œìˆ˜ ì´ìƒ ë°©ì¹˜í•˜ì§€ ì•Šê³  ê³„ì† ì‚¬ìš©</li>
        <li>ì¼ì¼ ì˜ë¢°, ì„¸ë‚˜íŒ¨ìŠ¤ ë“± ì¼ì¼ í€˜ìŠ¤íŠ¸ëŠ” ëª¨ë‘ ì§„í–‰</li>
        <li>ê¸¸ë“œ ì¶œì„ ë³´ìƒ ì—´ì‡  60ê°œ</li>
        <li>ìƒì  ë¬´ë£Œìƒí’ˆ ëª¨ë‘ êµ¬ë§¤</li>
      </ul>
      <h3>ğŸ“Œ ìœ ì˜ì‚¬í•­</h3>
      <ul>
        <li>ê° ì¹´í…Œê³ ë¦¬(êµµì€ ê¸€ì”¨)ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ê°’ì„ ë³¼ ìˆ˜ ìˆìŒ</li>
        <li>ì«„ì‘ì›ì •ëŒ€ ì—´ì‡ ëŠ” ì«„ì‘ì›ì •ëŒ€â…¡ ë§ˆì§€ë§‰ ì‚¬ì´í´ ê¸°ì¤€</li>
        <li>ì´ë ¥ì „ ë£¨ë¹„ ë³´ìƒì€ 2ì£¼ì— í•œë²ˆì”© ë°›ëŠ” ê±¸ë¡œ ê³„ì‚°</li>
        <li>ì„¸ë‚˜íŒ¨ìŠ¤ëŠ” í’€ì°¸ì‹œ 12ì¼ì´ë©´ ëª¨ë“  ë³´ìƒì„ ë°›ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, 
          2ì£¼ì™€ 4ì£¼ ìˆœì´ìµì— ì„¸ë‚˜íŒ¨ìŠ¤ê°€ ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ì„œë¡œ ê°™ë„ë¡ ì²˜ë¦¬í•¨. ê·¸ë˜ì„œ 2ì£¼ ë™ì•ˆì˜ ìˆœì´ìµì´ 4ì£¼ ë™ì•ˆì˜ ìˆœì´ìµë³´ë‹¤ ì¼í‰ê·  ìˆœì´ìµì´ ë†’ìŒ
        </li>
        <li>ì¡í™”ìƒì , ì´ë ¥ì „ ì¶œì„, ì´ë²¤íŠ¸ ë³´ìƒ ë“±ì˜ ë‹¤ë¥¸ ë³€ìˆ˜ëŠ” ê³„ì‚°ì— í¬í•¨í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê³„ì‚° ì „ì œì¡°ê±´ì„ ë§Œì¡±í•œë‹¤ë©´ ì‹¤ì œ ëª¨ì„ ìˆ˜ ìˆëŠ” ë£¨ë¹„ëŠ” ê³„ì‚°ê²°ê³¼ ë³´ë‹¤ ë§ìŒ</li>
        <li>ëª¨ë“  ê³„ì‚° ê²°ê³¼ëŠ” ëŒ€ëµì ì¸ ìˆ˜ì¹˜ë¡œ 100% ì •í™•í•˜ì§€ ì•ŠìŒ (Â± 80ë£¨ë¹„ ë²”ìœ„ ì˜¤ì°¨)</li>
      </ul><div class="credit">Made by 182.210</div>
    </div>
  </div>

  <div id="includedItemsOverlay" class="overlay">
  <div class="assumption-box">
    <span class="close-btn" onclick="closeIncludedItems()">&times;</span>
    <h3>ğŸ—ï¸ ê³„ì‚°ì— ê¸°ë³¸ í¬í•¨ëœ ì—´ì‡ </h3>
    <ul>
      <li>ìë™ ì¶©ì „ ì—´ì‡ (1ì¼) : 480ê°œ(ê¸°ë³¸) / 720ê°œ(ì›”ì •ì•¡)</li>
      <li>ì¼ì¼ì˜ë¢° + ê¸¸ë“œì¶œì„(1ì¼) : 120ê°œ</li>
      <li>300ì¼ ì¶œì„í‘œ(10ì¼) : 240ê°œ. 1ì¼ì— 24ê°œë¡œ ê³„ì‚°</li>
      <li>ì£¼ë§ í‘¸ì‹œë³´ìƒ(1ì£¼) : 200ê°œ</li>
      <li>ìƒì  ë¬´ë£Œ ì—´ì‡ ìƒì(1ì¼) : 60ê°œ</li>
    </ul>
    <h3>â™¦ï¸ ê³„ì‚°ì— ê¸°ë³¸ í¬í•¨ëœ ë£¨ë¹„</h3>
    <ul>
      <li>ì¼ì¼ì˜ë¢° + ìƒì  ë¬´ë£Œë£¨ë¹„(1ì¼) : 130ê°œ</li>
      <li>300ì¼ ì¶œì„í‘œ(10ì¼) : 200ê°œ. 1ì¼ì— 20ê°œë¡œ ê³„ì‚°</li>
      <li>ì£¼ë§ ë¶€ìŠ¤íŠ¸ ë³´ìƒ(1ì£¼) : 100ê°œ</li>
    </ul>
    <div class="credit">Made by 182.210</div>
  </div>
</div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3 id="openSubModal">ì›”ì •ì•¡ ì—¬ë¶€</h3>
    <div class="checkbox-row">
        <label class="checkbox-label"><input type="checkbox" id="rubySubscription" > ë£¨ë¹„ ì›”ì •ì•¡</label>
        <label class="checkbox-label"><input type="checkbox" id="keySubscription" > ì—´ì‡  ì›”ì •ì•¡</label>
    </div>
  </div>

    <div id="MonthlySubOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn" onclick="closeSubModal()">&times;</span>
      <h3>â™¦ï¸ ë£¨ë¹„ ì›”ì •ì•¡ êµ¬ë§¤ ì‹œ</h3>
      <ul>
        <li>ë§¤ì¼ ì¶œì„ ë£¨ë¹„ 200ê°œ</li>
        <li>ì›”ì •ì•¡ êµ¬ë§¤ ë³´ë„ˆìŠ¤ ë£¨ë¹„ 330ê°œ (4ì£¼ ë‹¹ í•œë²ˆ)</li>
        <li>ëª¨í—˜ ê²½í—˜ì¹˜ ë³´ë„ˆìŠ¤ 10% (ì«„ì‘ íŒìˆ˜ 1íŒ ê°ì†Œ)</li>
      </ul>
      <h3>ğŸ—ï¸ ì—´ì‡  ì›”ì •ì•¡ êµ¬ë§¤ ì‹œ</h3>
      <ul>
        <li>ë§¤ì¼ ì¶œì„ ì—´ì‡  80ê°œ</li>
        <li>ì›”ì •ì•¡ êµ¬ë§¤ ë³´ë„ˆìŠ¤ ë£¨ë¹„ 200ê°œ (4ì£¼ ë‹¹ í•œë²ˆ)</li>
        <li>ìë™ ì¶©ì „ ì—´ì‡  720ê°œ (24ì‹œê°„ ê¸°ì¤€)</li>
      </ul>
      </ul><div class="credit">Made by 182.210</div>
    </div>
  </div>

  <div class="section" style="display: flex; gap: 20px; align-items: center;">
    <h3 id="openSenaPassModal">ì„¸ë‚˜íŒ¨ìŠ¤</h3>
    <label class="checkbox-label"><input type="checkbox" id="senaPass" > ì„¸ë‚˜íŒ¨ìŠ¤ í¬í•¨</label>
    <span id="premiumOption">
      <label class="checkbox-label"><input type="checkbox" id="senaPass_premium" > í”„ë¦¬ë¯¸ì—„ êµ¬ë§¤</label>
    </span>
  </div>

  <div id="SenaPassOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn" onclick="closeSenaPassModal()">&times;</span>
      <h3>ê¸°ë³¸ ì„¸ë‚˜íŒ¨ìŠ¤ í’€ì°¸ ì‹œ</h3>
      <ul>
        <li>ì—´ì‡  ì´ 480ê°œ</li>
        <li>ë£¨ë¹„ ì´ 500ê°œ</li>
      </ul>
      <h3>í”„ë¦¬ë¯¸ì—„ íŒ¨ìŠ¤ êµ¬ë§¤ ì‹œ</h3>
      <ul>
        <li>ê¸°ë³¸ ë³´ìƒ í¬í•¨ ì—´ì‡  ì´ 1080ê°œ</li>
        <li>ê¸°ë³¸ ë³´ìƒ í¬í•¨ ë£¨ë¹„ ì´ 2900ê°œ</li>
      </ul>
      </ul><div class="credit">Made by 182.210</div>
    </div>
  </div>

  <div class="section" style="display: flex; gap: 15px;">
    <h3>ì—´ì‡ ìƒì êµ¬ë§¤</h3>
    <label for="keyBoxRuby">
      <select id="keyBoxRuby">
        <option value="0">êµ¬ë§¤ ì•ˆí•¨</option>
        <option value="50">50ë£¨ë¹„ë‹¨</option>
        <option value="80">80ë£¨ë¹„ë‹¨</option>
        <option value="100">100ë£¨ë¹„ë‹¨</option>
        <option value="120">120ë£¨ë¹„ë‹¨</option>
      </select>
      <span id="keyBoxCount_container">
            <input type="number" id="keyBoxCount" min="0" max="50" placeholder="ê¸°ë³¸:50">
    </span>
    </label>
  </div>

  <div class="section">
    <h3>ì¼ì£¼ì¼ ë™ì•ˆ ìƒì ì—ì„œ êµ¬ë§¤í•  ì—´ì‡  ê°œìˆ˜</h3>
    <label for="arenaKeyCount">
      ê²°íˆ¬ì¥ìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <input type="number" id="arenaKeyCount" min="0" max="7" placeholder="ìµœëŒ€ 7, ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>

    <label for="honorKeyCount">
      ëª…ì˜ˆìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <input type="number" id="honorKeyCount" min="0" max="7" placeholder="ìµœëŒ€ 7, ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>

    <label for="guildKeyCount">
      ê¸¸ë“œìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <input type="number" id="guildKeyCount" min="0" max="7" placeholder="ìµœëŒ€ 7, ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>
  </div>

  <div class="section">
    <div style="display: flex; align-items: center; gap: 10px;">
      <h3>í•˜ë£¨ ë ˆì´ë“œ íŒ ìˆ˜</h3>
      <span id="raidWarning" style="color: red; font-size: 14px; display: none;">
        ë ˆì´ë“œ íŒ ìˆ˜ê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤.
      </span>
    </div>
    <label for="raidCount">
      ë ˆì´ë“œ íŒ ìˆ˜:
      <input type="number" id="raidCount" min="0" placeholder="ì˜ˆ: 10, ë¯¸ ì…ë ¥ ì‹œ 0">
      <label class="checkbox-label"><input type="checkbox" id="raidOver11Level" > 11ë‹¨ê³„ ì´ìƒ</label>
    </label>
  </div>

  <div class="section">
    <h3>ì´ë ¥ì „ í‹°ì–´</h3>
    <label for="conquestTier">
      í‹°ì–´ ì„ íƒ:
      <select id="conquestTier">
        <option value="none">ì„ íƒ ì•ˆí•¨</option>
        <option value="common">ì¼ë°˜</option>
        <option value="advanced">ê³ ê¸‰</option>
        <option value="rare">í¬ê·€</option>
        <option value="legend">ì „ì„¤</option>
      </select>
    </label>
  </div>

<div class="section" style="display: flex; gap: 20px;">
  <h3>ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  í¬í•¨</h3>
  <label class="checkbox-label"><input type="checkbox" id="includeExpeditionKey" checked> í¬í•¨í•˜ì—¬ ê³„ì‚°</label>
</div>

<div class="section" style="display: flex; gap: 7px;">
  <h3 id="openRubyToUseModal" class="rubyuse">ë§¤ì¼ ì¼ì •í•˜ê²Œ <span class="mobile-br"><br></span>ì‚¬ìš©í•  ë£¨ë¹„</h3>
  <label for="rubyToUse">
      <input type="number" id="rubyToUse" min="0" placeholder="ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>
</div>

<div id="rubyToUseOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn" onclick="closeRubyToUseModal()">&times;</span>
      <h3>â™Ÿï¸ ì„¸ë‚˜ì²´ìŠ¤ íšŒë‹¹ ë£¨ë¹„ ë¹„ìš©</h3>
      <ul>
        <li>2íšŒì°¨ : 50ë£¨ë¹„</li>
        <li>3íšŒì°¨ : 100ë£¨ë¹„</li>
        <li>4íšŒì°¨ ì´ìƒ : 150ë£¨ë¹„</li>
      </ul>
      <h3>ğŸ« ì„±ì¥ë˜ì „ í‹°ì¼“ êµ¬ë§¤ë¹„ìš©</h3>
      <ul>
        <li>1ë²ˆì§¸ : 100ë£¨ë¹„</li>
        <li>2ë²ˆì§¸ : 150ë£¨ë¹„</li>
        <li>3ë²ˆì§¸ : 200ë£¨ë¹„</li>
        <li>4ë²ˆì§¸ : 300ë£¨ë¹„</li>
        <li>5ë²ˆì§¸ ì´ìƒ : 500ë£¨ë¹„</li>
      </ul>
      </ul><div class="credit">Made by 182.210</div>
    </div>
  </div>

  <div class="section">
    <button onclick="calculateProfit()">ğŸ’° ë£¨ë¹„ ìˆœì´ìµ ê³„ì‚°í•˜ê¸°</button>
    <button onclick="resetForm()" class="resetbutton">ğŸ”„ ì´ˆê¸°í™”</button>
    <h3>ğŸ“† 2ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit2w">0</span> ë£¨ë¹„</h3>
    <h3>ğŸ“† 4ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit4w">0</span> ë£¨ë¹„</h3>
    <h3>â™¦ï¸ (2ì£¼ ê¸°ì¤€)ì¼í‰ê·  ë£¨ë¹„ ìˆœì´ìµ: <span id="avgProfit">0</span> ë£¨ë¹„</h3>
    <h4>ğŸ‘¥ 2ì£¼ê°„ ë§Œë ™ì°ëŠ” ì«„ ìˆ˜: <span id="heroCount">0</span> ë§ˆë¦¬</h3>
    <h4>ğŸ“Š í•˜ë£¨ í‰ê·  ë§Œë ™ì°ëŠ” ì«„ ìˆ˜: <span id="avgHeroCount">0</span> ë§ˆë¦¬</h3>
    <h4>ğŸ’ ì•…ëª½ ì „ì„¤ ì¥ì‹ êµ¬ ì²œì¥ ì†Œìš” ê¸°ê°„ : <span id="accessoryDays">0</span> ì¼</h3>
  </div>
<script>

  function resetForm() {
  
    //ê²½ê³ ë¬¸ ì´ˆê¸°í™”
  document.getElementById("raidWarning").style.display = "none";
  document.getElementById("keyBoxCount_container").style.display = "none";

  // ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
  document.getElementById("rubySubscription").checked = false;
  document.getElementById("keySubscription").checked = false;
  document.getElementById("senaPass").checked = false;
  document.getElementById("senaPass_premium").checked = false;
  document.getElementById("raidOver11Level").checked = false;
  document.getElementById("includeExpeditionKey").checked = true;

  // ì…€ë ‰íŠ¸ ì´ˆê¸°í™”
  document.getElementById("keyBoxRuby").value = "0";
  document.getElementById("conquestTier").value = "none";

  // ìˆ«ì ì…ë ¥ ì´ˆê¸°í™”
  document.getElementById("honorKeyCount").value = "";
  document.getElementById("guildKeyCount").value = "";
  document.getElementById("arenaKeyCount").value = "";
  document.getElementById("raidCount").value = "";
  document.getElementById("keyBoxCount").value = "";
  document.getElementById("rubyToUse").value = "";

  // ê²°ê³¼ì°½ ì´ˆê¸°í™”
  document.getElementById("profit2w").innerText = "0";
  document.getElementById("profit4w").innerText = "0";
  document.getElementById("avgProfit").innerText = "0";
  document.getElementById("heroCount").innerText = "0";
  document.getElementById("avgHeroCount").innerText = "0";
  document.getElementById("accessoryDays").innerText = "0";
}

function calculateProfit() {
  const playsForLegendAccessory = 15000;
  const rubySub = document.getElementById("rubySubscription").checked;
  const keySub = document.getElementById("keySubscription").checked;
  const senaPass = document.getElementById("senaPass").checked;
  const senaPassPremium = document.getElementById("senaPass_premium").checked;
  const raid11Lev = document.getElementById("raidOver11Level").checked;
  const honorCount = parseInt(document.getElementById("honorKeyCount").value) || 0;
  const guildCount = parseInt(document.getElementById("guildKeyCount").value) || 0;
  const arenaCount = parseInt(document.getElementById("arenaKeyCount").value) || 0;
  const keyBoxRuby = parseInt(document.getElementById("keyBoxRuby").value) || 0;
  const parsedBoxCount = parseInt(document.getElementById("keyBoxCount").value);
  const keyBoxCount = isNaN(parsedBoxCount) ? 50 : parsedBoxCount;
  const raidCountPerDay = parseInt(document.getElementById("raidCount").value) || 0;
  const conquestTier = document.getElementById("conquestTier").value;
  const includeExpeditionKey = document.getElementById("includeExpeditionKey").checked;
  const rubyToUse = parseInt(document.getElementById("rubyToUse").value) || 0;

  function getKeyBoxRubyCostPerDay(rubyTier, boxCount) {
    let cost = 0;
    if (rubyTier >= 50) cost += 50 * 20;
    if (rubyTier >= 80) cost += 80 * 50;
    if (rubyTier >= 100) cost += 100 * 50;
    if (rubyTier >= 120) cost += 120 * 50;
    cost -= rubyTier*(50-boxCount);
    return cost;
  }

  function getConquestRuby(tier, weeks) {
    if (weeks < 2) return 0;
    if (tier === "legend") return 6400 * (weeks / 2);
    if (tier === "rare") return 3400 * (weeks / 2);
    if (tier === "advanced") return 1400 * (weeks / 2);
    if (tier === "common") return 200 * (weeks / 2);
    return 0;
  }

 function compute(period) {
  const days = period * 7;
  const weeks = period;

  // ğŸ”¹ ì—´ì‡  ìˆ˜ê¸‰
  const naturalKeyPerDay = keySub ? 720 : 480;
  const totalNaturalKeys = naturalKeyPerDay * days;
  const keySubKeys = keySub ? (period === 2 ? 1120 : 2240) : 0;
  const keysFromSenaPass = senaPass ? (senaPassPremium ? 1080 : 480) : 0; // êµ¬ë§¤ í›„ 2ì£¼ì•ˆì— ëë‚¸ë‹¤ëŠ” ê°€ì • í•˜ì—(period === 2 ? 540 : 1080) : (period === 2 ? 240 : 480);
  const keysFromDailySources = (60 + 60) * days; // ì¼ì¼ì˜ë¢° + ê¸¸ë“œì¶œì„
  const keysFrom300Attendance = 24 * days; // 300ì¼ ì¶œì„í‘œ ì—´ì‡ . 10ì¼ì— 240ê°œ ì´ë¯€ë¡œ í•˜ë£¨ì— 24ê°œë¡œ ê³„ì‚°
  const keysFromShop = (honorCount + guildCount + arenaCount) * 60 * weeks; // ëª…ì˜ˆ & ê¸¸ë“œ ìƒì 
  const keysFromWeekend = 200 * weeks; // ì£¼ë§ í‘¸ì‹œ ì—´ì‡  (í† ,ì¼ 100ê°œì”©)
  const keysFromKeyBox = ((1 + 
    (keyBoxRuby >= 50 ? 20 : 0) +
    (keyBoxRuby >= 80 ? 50 : 0) +
    (keyBoxRuby >= 100 ? 50 : 0) +
    (keyBoxRuby >= 120 ? 50 : 0) - (50-keyBoxCount)) * 60) * days;

  const totalKeysBeforeRaid = totalNaturalKeys + keySubKeys + keysFromSenaPass +
    keysFromDailySources + keysFrom300Attendance + keysFromShop + keysFromWeekend + keysFromKeyBox;

  // ğŸ”¹ ë ˆì´ë“œ ì°¨ê°
  const raidKeysUsed = raid11Lev ? (raidCountPerDay * 12 * days) : (raidCountPerDay * 6 * days) ; // ë ˆì´ë“œì— ì‚¬ìš©ë˜ëŠ” ì—´ì‡  ìˆ˜. 11ë‹¨ê³„ ì´ìƒì¼ ê²½ìš° íŒë‹¹ 12ê°œ ì°¨ê°
  const keysForCholjak = totalKeysBeforeRaid - raidKeysUsed; // ë ˆì´ë“œ ì—´ì‡  ì°¨ê° í›„ ì«„ì‘ìš© ì—´ì‡ 
  // ë ˆì´ë“œ ì—´ì‡  ì†Œëª¨ëŸ‰ì´ ì´ ì—´ì‡ ë³´ë‹¤ ë§ì„ ê²½ìš° â†’ ê²½ê³  ì¶œë ¥
  const raidWarning = document.getElementById("raidWarning");
    if (keysForCholjak < 0) {
      raidWarning.style.display = "inline";
      // return {
      //   netProfit: 0,
      //   heroCount: 0
      // }; // ê³„ì‚° ì¤‘ë‹¨
    } else {
      raidWarning.style.display = "none";
    }

  // ğŸ”¹ ì •í™•í•œ ì«„ì‘ì›ì •ëŒ€ ë£¨í”„ ê³„ì‚° ë°©ì‹ ì ìš©
  const externalRuns = keysForCholjak / 6; // ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  ì´ì™¸ ì—´ì‡ ë¡œ ì«„ì‘ëŒë¦¬ëŠ” íšŸìˆ˜
  let totalCholjakKeys = keysForCholjak;
    if (includeExpeditionKey) {
      const choljakQuestKeys = (externalRuns / 2115) * 270; // 2160(ì«„ì‘ì›ì •ëŒ€ ë§ˆì§€ë§‰ ì‚¬ì´í´ íšŸìˆ˜) - 45(ì«„ì‘ì›ì •ëŒ€ ì—´ì‡ ë¡œ ëŒë¦´ ìˆ˜ ìˆëŠ” íšŸìˆ˜) = 2115
      totalCholjakKeys += choljakQuestKeys;

      console.log("ì›ì •ëŒ€ ì—´ì‡  ë³´ìƒ:", choljakQuestKeys);
    } else {
      console.log("ì›ì •ëŒ€ ì—´ì‡  í¬í•¨í•˜ì§€ ì•ŠìŒ");
    }

  // ì•…ëª½ ì „ì„¤ ì¥ì‹ êµ¬ ì²œì¥ ì†Œìš”ê¸°ê°„ ê³„ì‚°
  let accessoryDays = playsForLegendAccessory / ((totalCholjakKeys / 12) / days);

  // ğŸ”¹ ì«„ì‘ ë£¨ë¹„ ìˆ˜ìµ
  const keysPerRun = rubySub ? 60 : 66;
  const runs = totalCholjakKeys / keysPerRun;
  const heroCount = runs * 4;
  const rubyFromCholjak = runs * 80;

  // ğŸ”¹ ê¸°íƒ€ ë£¨ë¹„ ìˆ˜ê¸‰
  const rubyFromRubySub = rubySub ? (days * 200 + (period === 2 ? 165 : 330)) : 0;
  const rubyFromKeySubBonus = keySub ? (period === 2 ? 100 : 200) : 0;
  const rubyFromSenaPass = senaPass ? (senaPassPremium ? 2900 : 500) : 0; // (period === 2 ? 1450 : 2900) : (period === 2 ? 250 : 500);
  const rubyFromDailyQuest = 100 * days;
  const rubyFrom300Attendance = 20 * days; // 300ì¼ ì¶œì„í‘œ ë£¨ë¹„. 10ì¼ì— 200ê°œ ì´ë¯€ë¡œ í•˜ë£¨ì— 20ê°œë¡œ ê³„ì‚°
  const rubyFromFreeShop = 30 * days;
  const rubyFromWeekend = 100 * weeks;
  const rubyFromConquest = getConquestRuby(conquestTier, weeks);

  const totalRubyIncome = rubyFromCholjak + rubyFromRubySub + rubyFromKeySubBonus +
    rubyFromSenaPass + rubyFromDailyQuest + rubyFrom300Attendance + rubyFromFreeShop + rubyFromWeekend + rubyFromConquest;

  // ğŸ”¹ ë£¨ë¹„ ì§€ì¶œ
  const rubySpentPerDay = getKeyBoxRubyCostPerDay(keyBoxRuby,keyBoxCount);
  const rubySpent = (rubySpentPerDay + rubyToUse) * days;

  const netProfit = totalRubyIncome - rubySpent;

  console.log("ë ˆì´ë“œ ì°¨ê° ì „ ì—´ì‡ :", totalKeysBeforeRaid);
  console.log("ìì—°íšŒë³µ ì—´ì‡ :", totalNaturalKeys);
  console.log("ì›”ì •ì•¡ ì—´ì‡ :", keySubKeys);
  console.log("ì„¸ë‚˜íŒ¨ìŠ¤ ì—´ì‡ :", keysFromSenaPass);
  console.log("ì¼ì¼ì˜ë¢° & ê¸¸ë“œì¶œì„:", keysFromDailySources);
  console.log("300ì¼ ì¶œì„í‘œ ì—´ì‡ :", keysFrom300Attendance);
  console.log("ìƒì  ì—´ì‡ :", keysFromShop);
  console.log("ì«„ì‘ ì—´ì‡ :", keysForCholjak);
console.log("ì«„ì‘ íšŸìˆ˜:", runs);
console.log("2ì£¼ ë™ì•ˆ ì‚¬ìš©ë˜ëŠ” ì«„:", heroCount);

  if(keysForCholjak<0){
    return {
      netProfit,
      heroCount:0,
      accessoryDays,
    };
  } else{
      return {
        netProfit,
        heroCount,
        accessoryDays,
      };
    }
}

  const result4w = compute(4);
  document.getElementById("profit4w").innerText = Math.floor(result4w.netProfit).toLocaleString();
  // document.getElementById("avgProfit").innerText = Math.floor(result4w.netProfit / 28).toLocaleString(); // 4ì£¼ê°„ ì¼í‰ê·  ìˆ˜ìµ
  document.getElementById("accessoryDays").innerText = Math.floor(result4w.accessoryDays).toLocaleString();

  const result2w = compute(2);
  document.getElementById("profit2w").innerText = Math.floor(result2w.netProfit).toLocaleString();
  document.getElementById("avgProfit").innerText = Math.floor(result2w.netProfit / 14).toLocaleString();
  document.getElementById("heroCount").innerText = Math.floor(result2w.heroCount).toLocaleString();
  const avgHero = result2w.heroCount / 14;
  document.getElementById("avgHeroCount").innerText =
    (avgHero % 1 < 0.05 || avgHero % 1 > 0.95)
      ? Math.round(avgHero).toString()
      : avgHero.toFixed(1);
}

// ì „ì œì¡°ê±´ ì•ˆë‚´ í† ê¸€
const overlay = document.getElementById("assumptionOverlay");
const openBtn = document.getElementById("showAssumption");
const closeBtn = overlay.querySelector(".close-btn");

openBtn.addEventListener("click", () => {
  overlay.classList.add("show");
});

closeBtn.addEventListener("click", () => {
  overlay.classList.remove("show");
});

// ë°”ê¹¥ ì˜ì—­ í´ë¦­ ì‹œ ë‹«ê¸°
overlay.addEventListener("click", (e) => {
  if (e.target === overlay) {
    overlay.classList.remove("show");
  }
});

const includedItemsOverlay = document.getElementById("includedItemsOverlay");
  const showIncludedItemsBtn = document.getElementById("showIncludedItems");

  showIncludedItemsBtn.addEventListener("click", () => {
    includedItemsOverlay.classList.add("show");
  });

  function closeIncludedItems() {
    includedItemsOverlay.classList.remove("show");
  }

  includedItemsOverlay.addEventListener("click", (e) => {
    if (e.target === includedItemsOverlay) {
      includedItemsOverlay.classList.remove("show");
    }
  });

  // ì›”ì •ì•¡ ì„¤ëª…
const SubModalOverlay = document.getElementById('MonthlySubOverlay');
const openSubModalBtn = document.getElementById('openSubModal');

openSubModalBtn.addEventListener("click", () => {
  SubModalOverlay.classList.add("show");
});

function closeSubModal() {
  SubModalOverlay.classList.remove("show");
}

SubModalOverlay.addEventListener("click", (e) => {
  if (e.target === SubModalOverlay) {
    SubModalOverlay.classList.remove("show");
  }
});

// ì„¸ë‚˜íŒ¨ìŠ¤ ì„¤ëª…
const SenaPassModalOverlay = document.getElementById('SenaPassOverlay');
const openSenaPassModalBtn = document.getElementById('openSenaPassModal');

openSenaPassModalBtn.addEventListener("click", () => {
  SenaPassModalOverlay.classList.add("show");
});

function closeSenaPassModal() {
  SenaPassModalOverlay.classList.remove("show");
}

SenaPassModalOverlay.addEventListener("click", (e) => {
  if (e.target === SenaPassModalOverlay) {
    SenaPassModalOverlay.classList.remove("show");
  }
});

// ë§¤ì¼ ì‚¬ìš© ë£¨ë¹„ ì„¤ëª…
const rubyToUseModalOverlay = document.getElementById('rubyToUseOverlay');
const openrubyToUseModalBtn = document.getElementById('openRubyToUseModal');

openrubyToUseModalBtn.addEventListener("click", () => {
  rubyToUseModalOverlay.classList.add("show");
});

function closeRubyToUseModal() {
  rubyToUseModalOverlay.classList.remove("show");
}

rubyToUseModalOverlay.addEventListener("click", (e) => {
  if (e.target === rubyToUseModalOverlay) {
    rubyToUseModalOverlay.classList.remove("show");
  }
});

  // ìˆ«ì ì…ë ¥ì´ 8 ì´ìƒì´ë©´ ìë™ìœ¼ë¡œ 7ë¡œ ë³€ê²½
function enforceMaxValue(id, max) {
  const input = document.getElementById(id);
  input.addEventListener('input', () => {
    let val = parseInt(input.value);
    if (val > max) {
      input.value = max;
    }
  });
}

// ì ìš© ëŒ€ìƒ input ìš”ì†Œ ë“±ë¡
enforceMaxValue("honorKeyCount", 7);
enforceMaxValue("guildKeyCount", 7);
enforceMaxValue("arenaKeyCount", 7);
enforceMaxValue("keyBoxCount", 50);

const selectBox = document.getElementById('keyBoxRuby');
const keyBoxCountContainer = document.getElementById('keyBoxCount_container');

// 2. select ìƒìì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
selectBox.addEventListener('change', function() {
            // 3. ë§Œì•½ ì„ íƒëœ optionì˜ valueê°€ 'custom'ì´ë¼ë©´
    if (this.value === '80' || this.value === '100' || this.value === '120') {
                // ì…ë ¥ ìƒìë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
        keyBoxCountContainer.style.display = 'inline-block';
    } else {
                // ê·¸ ì™¸ì˜ ë‹¤ë¥¸ ì˜µì…˜ì„ ì„ íƒí–ˆë‹¤ë©´, ì…ë ¥ ìƒìë¥¼ ë‹¤ì‹œ ìˆ¨ê¹ë‹ˆë‹¤.
        keyBoxCountContainer.style.display = 'none';
    }});

const senaPassCheckbox = document.getElementById('senaPass');
const premiumCheckbox = document.getElementById('senaPass_premium');
const premiumOptionContainer = document.getElementById('premiumOption');

senaPassCheckbox.addEventListener('change', function() {
  if(this.checked) {
    premiumOptionContainer.style.display = 'inline-block';
  } else {
    premiumCheckbox.checked = false;
    premiumOptionContainer.style.display = 'none';
  }
});

</script>
</body>
</html>
