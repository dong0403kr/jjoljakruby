<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ì«„ì‘ ê³„ì‚°ê¸°</title>
  <link rel="icon" href="image/favicon.svg" type="image/svg+xml">
  <style>
    @font-face {
    font-family: 'Gyeonggi_Title_Medium';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2410-3@1.0/Title_Medium.woff') format('woff');
    font-weight: 300;
    font-style: normal;
}

    body { 
      font-family: Arial, sans-serif;
      max-width: 600px;
      padding : 15px;
      margin-left: auto;
      margin-right: auto;
    }

    label, h3, h4, h1, ul, select, input[type="checkbox"] {
      -webkit-user-select: none; /* Safari */
      -moz-user-select: none;    /* Firefox */
      -ms-user-select: none;     /* IE/Edge */
      user-select: none;         /* í‘œì¤€ */
    }

    h1, h3, h4 {
      font-family: 'Gyeonggi_Title_Medium';
      color: #333;
    }

    .section {
      margin-bottom: 0px;
    }

    label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 1px 0;
    }

    label[for="checkboxlabel"] {
      cursor: pointer;
    }

    input[type="number"],
    select {
      flex: 1;
      padding: 6px;
      margin-left: 0px;
      cursor: pointer;
    }
    
    input[type="number"] {
      cursor:text;
    }

    input[type="checkbox"] {
      margin-right: 10px;
      cursor: pointer;
    }

    button {
      font-family: 'Gyeonggi_Title_Medium';
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    #calculateBtn {
      margin-top: 20px;
    }

    /* ëª¨ë°”ì¼ í„°ì¹˜ ë° ë°ìŠ¤í¬íƒ‘ í´ë¦­ í”¼ë“œë°± */
  button:active {
    background-color: #45a049;
  }
  /* ë°ìŠ¤í¬íƒ‘ ë§ˆìš°ìŠ¤ í˜¸ë²„ ì „ìš© íš¨ê³¼ */
  @media (hover: hover) {
    button:hover {
      background-color: #45a049;
    }
  }
    .resetbutton {
      background-color: #ccc; 
      color: #333;
    }
    
    .resetbutton:active {
    background-color: #b4b4b4; 
  }
  @media (hover: hover) {
    .resetbutton:hover {
      background-color: #b4b4b4; 
    }
  }

    .checkbox-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 20px;
      flex-direction: row;
    }

    .overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4);
  display: none;
  justify-content: center;
  align-items: center;
  animation: fadeOut 0.2s ease forwards;
  z-index: 1000;
}

.overlay.show {
  display: flex;
  animation: fadeIn 0.2s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

.assumption-box {
  background-color: #fff;
  padding: 20px;
  border-radius: 10px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  position: relative;
  animation: fadeIn 0.2s ease forwards;
}

.assumption-box h3 {
  margin-top: 0;
}

.assumption-box ul {
  padding-left: 20px;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 20px;
  cursor: pointer;
}

.title-wrapper {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: nowrap;
  gap: 10px;
  padding: 15px 60px;
  white-space: nowrap;
  overflow: hidden;
}

.title-wrapper h1 {
  font-size: clamp(38px, 5vw, 40px); /* í™”ë©´ í¬ê¸°ì— ë”°ë¼ ìë™ ì¡°ì ˆ */
  margin-bottom: 10px;
  flex-shrink: 1;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
}

.assumption-button {
  background-color: #777;
  transition: background-color 0.15s ease-in-out;
  font-size: 14px;
  padding: 7px 10px;
  white-space: nowrap;
  max-width: 120px;
  min-width: 80px;
  width: auto;
  flex-shrink: 0;
  margin-top: 10px;
}



.assumption-box .credit {
  position: absolute;
  bottom: 10px;
  right: 10px;
  font-size: 13px;
  color: #b6b6b69a;
}

.assumption-button:active {
    background-color: #e06040;
  }
  
  @media (hover: hover) {
    .assumption-button:hover {
      background-color: #e06040;
    }
  }

    .checkbox-label {
      cursor: pointer;
    }

    #raidOver11Level {
      margin-left: 15px;
    }
    .button-column {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 10px;
  align-items: flex-start; /* ì™¼ìª½ ì •ë ¬ (ì›í•˜ë©´ centerë¡œ ë³€ê²½ ê°€ëŠ¥) */
}

/* ì…ë ¥ ìƒìë¥¼ ê°ì‹¸ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        #keyBoxCount_container {
            display: none;
            margin-left: 10px;
        }

        #premiumOption {
    display: none;
  }

  #openSubModal, #openSenaPassModal, #openRubyToUseModal, #openMedalModal {
    cursor: pointer;
    color: #333;
    transition: color 0.15s ease-in-out;
  }

  #openSubModal:hover, #openSenaPassModal:hover, #openRubyToUseModal:hover, #openMedalModal:hover {
    cursor: pointer;
    color:#e06040
  }

.mobile-break {
  display: inline;
}
.mobile-br {
    display: none;
  }

  .credit::after {
    content: 'ìµœì¢… ìˆ˜ì •ì¼ 2025.09.13';
  }

  .max-btn{
    background-color: #ffffff;
    border: 1px solid #333;
    margin-top: 0;
    margin-left: 10px;
    font-size: auto;
    padding: 7px;
    color: #333;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out;
    touch-action: manipulation;
  }

  .btn90, .btn120{
    background-color: #ffffff;
    border: 1px solid #333;
    margin-top: 0;
    margin-left: 0px;
    font-size: auto;
    padding: 7px;
    color: #333;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out;
    touch-action: manipulation;
  }

  /* ëª¨ë°”ì¼ í„°ì¹˜ ë° ë°ìŠ¤í¬íƒ‘ í´ë¦­ í”¼ë“œë°± */
  .max-btn:active, .btn90:active, .btn120:active {
    background-color: #999;
    color: #ffffff;
  }

  /* ë°ìŠ¤í¬íƒ‘ ë§ˆìš°ìŠ¤ í˜¸ë²„ ì „ìš© íš¨ê³¼ */
  @media (hover: hover) {
    .max-btn:hover, .btn90:hover, .btn120:hover {
      background-color: #999;
      color: #ffffff;
    }
  }

  .input-wrapper {
    position: relative;
    display: inline-block;
    align-self: center;
  }
  .tooltip-bubble {
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    position: absolute;
    top: 105%;
    left: 30%;
    transform: translateX(-50%);
    background-color: #e06040;
    color: #fff;
    padding: 4px 7px;
    border-radius: 6px;
    font-size: 14px;
    white-space: nowrap;
    z-index: 10;
    cursor: pointer;
    -webkit-user-select: none; /* Safari */
    -moz-user-select: none;    /* Firefox */
    -ms-user-select: none;     /* IE/Edge */
    user-select: none;         /* í‘œì¤€ */
  }
  .tooltip-bubble::after {
    content: '';
    position: absolute;
    bottom: 96%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: transparent transparent #e06040 transparent;
  }
  .tooltip-bubble.visible {
    visibility: visible;
    opacity: 1;
  }

  h3 {
    margin-top: 15px;
    margin-bottom: 15px;
  }
  h4 {
    margin-top: 15px;
    margin-bottom: 15px;
  }

  .rubyuseTitle{
    margin-top: 15px;
    margin-bottom: 15px;
  }

  .raidTitle{
    margin-top: 15px;
    margin-bottom:15px;
  }

  #raidSection {
    margin-top: 13px;
  }

  #medalCount {
    width: 100px
  }


    @media (max-width: 480px) {
      .rubyuseTitle {
        line-height: 24px;
        margin-top: 12px;
        margin-bottom: 12px;
      }

      label {
        flex-direction: nowrap;
        align-items: center;
        vertical-align: middle;
      }

      input[type="number"],
      select {
        margin-left: 5px;
        width: 100%;
        align-self: center;
      }

      #arenaKeyCount, #guildKeyCount, #honorKeyCount{
        margin-left: 0px;
        width: 100%;
        margin-top:0px;
      }

      #raidCount{
        width: 80px;
        margin-top: 0;
      }

      .raidTitle{
        line-height: 24px;
        margin-top: 12px;
        margin-bottom: 12px;
      }

      #raidSection {
        margin-top: 10px;
      }

      button {
        width: 100%;
      }

      .max-btn {
        width: auto;
        margin-left: 4px;
      }
      .title-wrapper {
        padding: 8px 25px;
        line-height: 40px;
        margin-left: 8%;
        margin-top: -2%;
        letter-spacing: 0.25em;
      }
      .checkbox-row {
        flex-direction: nowrap; /* ì„¸ë¡œ ë°°ì—´ë¡œ ì „í™˜ */
        gap: 10px;
      }
      .mobile-break {
    display: none;
  }
  .mobile-br {
    display: inline;
  }

  .credit::after {
    content: 'ëª¨ë°”ì¼ì€ í„°ì¹˜ë¡œ íŒì—…ì„ ëŒ ìˆ˜ ìˆìŒ | ìµœì¢… ìˆ˜ì •ì¼ 2025.09.13';
  }
  .close-btn {
      /* í„°ì¹˜ ì˜ì—­ì„ ë„“íˆê¸° ìœ„í•´ íŒ¨ë”© ì¶”ê°€ */
      padding: 15px;
      top: 0;
      right: 0;
    }
    .modal-scroll-content {
      max-height: 85vh; /* í™”ë©´ ë†’ì´ì˜ 85%ë¥¼ ë„˜ì§€ ì•Šë„ë¡ ì„¤ì • */
      overflow-y: auto; /* ë‚´ìš©ì´ ê¸¸ì–´ì§€ë©´ ìŠ¤í¬ë¡¤ ìƒì„± */
    }
    #conquestSection {
      margin-top: -5px;
    }
    }
  </style>
</head>
<body>

  <div class="title-wrapper">
    <h1>ì„¸ë‚˜ë¦¬ <span class="mobile-break">ì«„ì‘</span> <span class="mobile-br"><br></span> ê³„ì‚°ê¸°</h1>
    <div class="button-column">
      <button id="showAssumption" class="assumption-button">ì „ì œì¡°ê±´</button>
      <button id="showIncludedItems" class="assumption-button">ê³„ì‚° í¬í•¨ í•­ëª©</button>
    </div>
  </div>

  <div id="assumptionOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn">&times;</span>
      <div class="modal-scroll-content">
      <h3>ğŸ“Œ ê³„ì‚° ì „ì œì¡°ê±´</h3>
      <ul>
        <li>ì«„ì‘ì€ ëª¨í—˜ ì¼ë°˜ 14ì˜ì§€ ì´ìƒ, ì „ë³µë¥  0% ê¸°ì¤€</li>
        <li>ì—´ì‡ ë¥¼ ìµœëŒ€ ë³´ìœ ê°œìˆ˜ ì´ìƒ ë°©ì¹˜í•˜ì§€ ì•Šê³  ê³„ì† ì‚¬ìš©</li>
        <li>ì¼ì¼ ì˜ë¢°, ì„¸ë‚˜íŒ¨ìŠ¤ ë“± ì¼ì¼ í€˜ìŠ¤íŠ¸ëŠ” ëª¨ë‘ ì§„í–‰</li>
        <li>ê¸¸ë“œ ì¶œì„ ë³´ìƒ ì—´ì‡  60ê°œ</li>
        <li>ìƒì  ë¬´ë£Œìƒí’ˆ ëª¨ë‘ êµ¬ë§¤</li>
      </ul>
      <h3>ğŸ“Œ ìœ ì˜ì‚¬í•­</h3>
      <ul>
        <li>ê° ì¹´í…Œê³ ë¦¬(êµµì€ ê¸€ì”¨)ë¥¼ í´ë¦­í•˜ë©´ ê´€ë ¨ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìˆìŒ</li>
        <li>ì„¸ë‚˜íŒ¨ìŠ¤, ì›”ì •ì•¡ êµ¬ë§¤ ë³´ë„ˆìŠ¤ ë“± ë‹¨ê¸°ê°„ì— ë²Œì–´ë“¤ì´ëŠ” ì¬í™”ê¹Œì§€ ê³„ì‚°ì— ë°˜ì˜í–ˆê¸° ë•Œë¬¸ì— ê³„ì‚°ëœ 2ì£¼ê°„ ìˆœì´ìµì€ ì‹¤ì œë³´ë‹¤ ì ìŒ. ê³„ì‚°ì˜ í¸ì˜ë¥¼ ìœ„í•´ 2ì£¼ì”© ë‚˜ëˆ  ë°›ëŠ” ê²ƒìœ¼ë¡œ ê³„ì‚°</li>
        <li>ì«„ì‘ì›ì •ëŒ€ ì—´ì‡ ëŠ” ì«„ì‘ì›ì •ëŒ€â…¡ ë§ˆì§€ë§‰ ì‚¬ì´í´ ê¸°ì¤€</li>
        <li>ì´ë ¥ì „ ë£¨ë¹„ ë³´ìƒì€ 2ì£¼ì— í•œë²ˆì”© ë°›ëŠ” ê±¸ë¡œ ê³„ì‚°</li>
        <li>ì¡í™”ìƒì , ì´ë ¥ì „ ë¼ìš´ë“œ ì¶œì„, ì´ë²¤íŠ¸ ë³´ìƒ ë“±ì˜ ë¶ˆê·œì¹™ ë³€ìˆ˜ëŠ” ê³„ì‚°ì— í¬í•¨í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê³„ì‚° ì „ì œì¡°ê±´ì„ ë§Œì¡±í•œë‹¤ë©´ ì‹¤ì œ ëª¨ì„ ìˆ˜ ìˆëŠ” ë£¨ë¹„ëŠ” ê³„ì‚°ê²°ê³¼ ë³´ë‹¤ ë§ìŒ</li>
        <li>ëª¨ë“  ê³„ì‚° ê²°ê³¼ëŠ” ëŒ€ëµì ì¸ ìˆ˜ì¹˜ë¡œ 100% ì •í™•í•˜ì§€ ì•ŠìŒ (Â± 80ë£¨ë¹„ ë²”ìœ„ ì˜¤ì°¨)</li>
        </div>
      </ul><div class="credit"></div>
    </div>
  </div>

  <div id="includedItemsOverlay" class="overlay">
  <div class="assumption-box">
    <span class="close-btn" onclick="closeIncludedItems()">&times;</span>
    <h3>ğŸ—ï¸ ê³„ì‚°ì— ê¸°ë³¸ í¬í•¨ëœ ì—´ì‡ </h3>
    <ul>
      <li>ìë™ ì¶©ì „ ì—´ì‡ (1ì¼) : 480ê°œ(ê¸°ë³¸) / 720ê°œ(ì›”ì •ì•¡)</li>
      <li>ì¼ì¼ì˜ë¢° + ê¸¸ë“œì¶œì„(1ì¼) : 120ê°œ</li>
      <li>300ì¼ ì¶œì„í‘œ(10ì¼) : 240ê°œ. 1ì¼ì— 24ê°œë¡œ ê³„ì‚°</li>
      <li>ì£¼ë§ í‘¸ì‹œë³´ìƒ(1ì£¼) : 200ê°œ</li>
      <li>ìƒì  ë¬´ë£Œ ì—´ì‡ ìƒì(1ì¼) : 60ê°œ</li>
    </ul>
    <h3>â™¦ï¸ ê³„ì‚°ì— ê¸°ë³¸ í¬í•¨ëœ ë£¨ë¹„</h3>
    <ul>
      <li>ì¼ì¼ì˜ë¢° + ìƒì  ë¬´ë£Œë£¨ë¹„(1ì¼) : 130ê°œ</li>
      <li>300ì¼ ì¶œì„í‘œ(10ì¼) : 200ê°œ. 1ì¼ì— 20ê°œë¡œ ê³„ì‚°</li>
      <li>ì£¼ë§ ë¶€ìŠ¤íŠ¸ ë³´ìƒ(1ì£¼) : 100ê°œ</li>
    </ul>
    <div class="credit"></div>
  </div>
</div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3 id="openSubModal">ì›”ì •ì•¡ ì—¬ë¶€</h3>
    <div class="checkbox-row">
        <label class="checkbox-label"><input type="checkbox" id="rubySubscription" > ë£¨ë¹„ ì›”ì •ì•¡</label>
        <label class="checkbox-label"><input type="checkbox" id="keySubscription" > ì—´ì‡  ì›”ì •ì•¡</label>
    </div>
  </div>

    <div id="MonthlySubOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn" onclick="closeSubModal()">&times;</span>
      <h3>â™¦ï¸ ë£¨ë¹„ ì›”ì •ì•¡ êµ¬ë§¤ ì‹œ</h3>
      <ul>
        <li>ë§¤ì¼ ì¶œì„ ë£¨ë¹„ 200ê°œ</li>
        <li>ì›”ì •ì•¡ êµ¬ë§¤ ë³´ë„ˆìŠ¤ ë£¨ë¹„ 330ê°œ<br>(4ì£¼ ë‹¹ í•œë²ˆ, 2ì£¼ì— 165ê°œë¡œ ë°˜ì˜)</li>
        <li>ëª¨í—˜ ê²½í—˜ì¹˜ ë³´ë„ˆìŠ¤ 10% (ì«„ì‘ íŒìˆ˜ 1íŒ ê°ì†Œ)</li>
      </ul>
      <h3>ğŸ—ï¸ ì—´ì‡  ì›”ì •ì•¡ êµ¬ë§¤ ì‹œ</h3>
      <ul>
        <li>ë§¤ì¼ ì¶œì„ ì—´ì‡  80ê°œ</li>
        <li>ì›”ì •ì•¡ êµ¬ë§¤ ë³´ë„ˆìŠ¤ ë£¨ë¹„ 200ê°œ<br>(4ì£¼ ë‹¹ í•œë²ˆ, 2ì£¼ì— 100ê°œë¡œ ë°˜ì˜)</li>
        <li>ìë™ ì¶©ì „ ì—´ì‡  720ê°œ (24ì‹œê°„ ê¸°ì¤€)</li>
      </ul>
      </ul><div class="credit"></div>
    </div>
  </div>

  <div class="section" style="display: flex; gap: 20px; align-items: center;">
    <h3 id="openSenaPassModal">ì„¸ë‚˜íŒ¨ìŠ¤</h3>
    <label class="checkbox-label"><input type="checkbox" id="senaPass" > ì„¸ë‚˜íŒ¨ìŠ¤ í¬í•¨</label>
    <span id="premiumOption">
      <label class="checkbox-label"><input type="checkbox" id="senaPass_premium" > í”„ë¦¬ë¯¸ì—„ êµ¬ë§¤</label>
    </span>
  </div>

  <div id="SenaPassOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn" onclick="closeSenaPassModal()">&times;</span>
      <h3>ê¸°ë³¸ ì„¸ë‚˜íŒ¨ìŠ¤ í’€ì°¸ ì‹œ</h3>
      <ul>
        <li>ì—´ì‡  ì´ 480ê°œ<br>(2ì£¼ì— 240ê°œë¡œ ë°˜ì˜)</li>
        <li>ë£¨ë¹„ ì´ 500ê°œ<br>(2ì£¼ì— 250ê°œë¡œ ë°˜ì˜)</li>
      </ul>
      <h3>í”„ë¦¬ë¯¸ì—„ íŒ¨ìŠ¤ êµ¬ë§¤ ì‹œ</h3>
      <ul>
        <li>ê¸°ë³¸ ë³´ìƒ í¬í•¨ ì—´ì‡  ì´ 1080ê°œ<br>(2ì£¼ì— 540ê°œë¡œ ë°˜ì˜)</li>
        <li>ê¸°ë³¸ ë³´ìƒ í¬í•¨ ë£¨ë¹„ ì´ 2900ê°œ<br>(2ì£¼ì— 1450ê°œë¡œ ë°˜ì˜)</li>
      </ul>
      </ul><div class="credit"></div>
    </div>
  </div>

  <div class="section" style="display: flex; gap: 15px;">
    <h3>ì—´ì‡ ìƒì êµ¬ë§¤</h3>
    <label for="keyBoxRuby">
      <select id="keyBoxRuby">
        <option value="0">êµ¬ë§¤ ì•ˆí•¨</option>
        <option value="50">50ë£¨ë¹„ë‹¨</option>
        <option value="80">80ë£¨ë¹„ë‹¨</option>
        <option value="100">100ë£¨ë¹„ë‹¨</option>
        <option value="120">120ë£¨ë¹„ë‹¨</option>
      </select>
      <span id="keyBoxCount_container">
            <input type="number" id="keyBoxCount" min="0" max="50" placeholder="ê¸°ë³¸:50">
    </span>
    </label>
  </div>

  <div class="section">
    <h3>ì¼ì£¼ì¼ ë™ì•ˆ ìƒì ì—ì„œ êµ¬ë§¤í•  ì—´ì‡  ê°œìˆ˜</h3>
    <label for="arenaKeyCount">
      âš”ï¸ê²°íˆ¬ì¥ìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <button class="max-btn" data-target="arenaKeyCount">ìµœëŒ€</button>
      <input type="number" id="arenaKeyCount" min="0" max="7" placeholder="ìµœëŒ€ 7, ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>

    <label for="honorKeyCount">
      ğŸµï¸ëª…ì˜ˆìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <button class="max-btn" data-target="honorKeyCount">ìµœëŒ€</button>
      <input type="number" id="honorKeyCount" min="0" max="7" placeholder="ìµœëŒ€ 7, ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>

    <label for="guildKeyCount">
      ğŸ…ê¸¸ë“œìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <button class="max-btn" data-target="guildKeyCount">ìµœëŒ€</button>
      <input type="number" id="guildKeyCount" min="0" max="7" placeholder="ìµœëŒ€ 7, ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>
  </div>

  <div class="section" id="raidSection" style="display: flex; gap: 10px;">
      <h3 class="raidTitle">í•˜ë£¨ ë ˆì´ë“œ<span class="mobile-br"><br></span> íŒ ìˆ˜</h3>
     <div class="input-wrapper"> 
      <label for="raidCount">
        <input type="number" id="raidCount" min="0" placeholder="ë¯¸ ì…ë ¥ ì‹œ 0">
        <label class="checkbox-label"><input type="checkbox" id="raidOver11Level" checked>11ë‹¨ê³„ ì´ìƒ</label>
      </label>
      <div id="raidTooltip" class="tooltip-bubble">ë ˆì´ë“œì— ì†Œëª¨ë˜ëŠ” ì—´ì‡ ê°€ ë„ˆë¬´ ë§ìŒ!</div>
    </div>
  </div>

  <div class="section" id="conquestSection" style="display: flex; gap: 20px;">
    <h3>ì´ë ¥ì „ í‹°ì–´</h3>
    <label for="conquestTier">
      <select id="conquestTier">
        <option value="none">ì„ íƒ ì•ˆí•¨</option>
        <option value="common">ì¼ë°˜</option>
        <option value="advanced">ê³ ê¸‰</option>
        <option value="rare">í¬ê·€</option>
        <option value="legend">ì „ì„¤</option>
      </select>
    </label>
  </div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3 id="openMedalModal">ì‹œë ¨ì˜ íƒ‘ ë©”ë‹¬</h3>
    <label for="medalCount">
      <button class="btn90" data-target="medalCount">90ê°œ</button>
      <button class="btn120" data-target="medalCount">120ê°œ</button>
      <input type="number" id="medalCount" min="0" max="120" placeholder="ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>
  </div>

  <div id="medalOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn" onclick="closeMedalModal()">&times;</span>
      <h3>ì‹œë ¨ì˜ íƒ‘ ë©”ë‹¬ ë³„ ë£¨ë¹„ ë³´ìƒ</h3>
      <ul>
        <li>4ì£¼ë§ˆë‹¤ ì´ˆê¸°í™” ë˜ê¸° ë•Œë¬¸ì— 2ì£¼ëŠ” ì ˆë°˜ìœ¼ë¡œ ë°˜ì˜</li>
        <li>10~19ê°œ : 100ë£¨ë¹„</li>
        <li>20~29ê°œ : 200ë£¨ë¹„</li>
        <li>30~39ê°œ : 300ë£¨ë¹„</li>
        <li>40~49ê°œ : 400ë£¨ë¹„</li>
        <li>50~69ê°œ : 500ë£¨ë¹„</li>
        <li>70~79ê°œ : 600ë£¨ë¹„</li>
        <li>80~99ê°œ : 700ë£¨ë¹„</li>
        <li>100~109ê°œ : 1000ë£¨ë¹„</li>
        <li>110~120ê°œ : 1500ë£¨ë¹„</li>
      </ul>
      </ul><div class="credit"></div>
    </div>
  </div>

<div class="section" style="display: flex; gap: 20px;">
  <h3>ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  í¬í•¨</h3>
  <label class="checkbox-label"><input type="checkbox" id="includeExpeditionKey" checked> í¬í•¨í•˜ì—¬ ê³„ì‚°</label>
</div>

<div class="section" style="display: flex; gap: 10px;">
  <h3 id="openRubyToUseModal" class="rubyuseTitle">ë§¤ì¼ ì¼ì •í•˜ê²Œ <span class="mobile-br"><br></span>ì‚¬ìš©í•  ë£¨ë¹„</h3>
  <label for="rubyToUse">
      <input type="number" id="rubyToUse" min="0" placeholder="ë¯¸ ì…ë ¥ ì‹œ 0">
    </label>
</div>

<div id="rubyToUseOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn" onclick="closeRubyToUseModal()">&times;</span>
      <h3>â™Ÿï¸ ì„¸ë‚˜ì²´ìŠ¤ ëˆ„ì  ë£¨ë¹„ ë¹„ìš©</h3>
      <ul>
        <li>ëˆ„ì  2íšŒ : 50ë£¨ë¹„</li>
        <li>ëˆ„ì  3íšŒ : 150ë£¨ë¹„</li>
        <li>4íšŒì°¨ ì´ìƒ : + 150ë£¨ë¹„ì”©</li>
      </ul>
      <h3>ğŸ« ì„±ì¥ë˜ì „ í‹°ì¼“ êµ¬ë§¤ë¹„ìš©</h3>
      <ul>
        <li>1ì¥ : 100ë£¨ë¹„</li>
        <li>2ì¥ : 250ë£¨ë¹„</li>
        <li>3ì¥ : 450ë£¨ë¹„</li>
        <li>4ì¥ : 750ë£¨ë¹„</li>
        <li>5ì¥ ì´ìƒ : + 500ë£¨ë¹„ì”©</li>
      </ul>
      </ul><div class="credit"></div>
    </div>
  </div>

  <div class="section">
    <button id="calculateBtn" onclick="calculateProfit()">ğŸ’° ë£¨ë¹„ ìˆœì´ìµ ê³„ì‚°í•˜ê¸°</button>
    <button onclick="resetForm()" class="resetbutton">ğŸ”„ ì´ˆê¸°í™”</button>
    <h3>ğŸ“† 2ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit2w">0</span> ë£¨ë¹„</h3>
    <h3>ğŸ“† 4ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit4w">0</span> ë£¨ë¹„</h3>
    <h3>â™¦ï¸ ì¼í‰ê·  ë£¨ë¹„ ìˆœì´ìµ: <span id="avgProfit">0</span> ë£¨ë¹„</h3>
    <h4>ğŸ‘¥ 2ì£¼ê°„ ë§Œë ™ì°ëŠ” ì«„ ìˆ˜: <span id="heroCount">0</span> ë§ˆë¦¬</h3>
    <h4>ğŸ“Š í•˜ë£¨ í‰ê·  ë§Œë ™ì°ëŠ” ì«„ ìˆ˜: <span id="avgHeroCount">0</span> ë§ˆë¦¬</h3>
    <h4>ğŸ’ ì•…ëª½ ì „ì„¤ ì¥ì‹ êµ¬ ì²œì¥ ì†Œìš” ê¸°ê°„ : <span id="accessoryDays">0</span> ì¼</h3>
  </div>
<script>
  const raidTooltip = document.getElementById("raidTooltip");

  function resetForm() {
  //íˆ´íŒ ì´ˆê¸°í™”
  raidTooltip.classList.remove('visible');

  // ë™ì  ìˆ«ì ì…ë ¥ ì´ˆê¸°í™”
  document.getElementById("keyBoxCount_container").style.display = 'none';

  // ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
  document.getElementById("rubySubscription").checked = false;
  document.getElementById("keySubscription").checked = false;
  document.getElementById("senaPass").checked = false;
  document.getElementById("senaPass_premium").checked = false;
  document.getElementById("raidOver11Level").checked = true;
  document.getElementById("includeExpeditionKey").checked = true;

  // ì…€ë ‰íŠ¸ ì´ˆê¸°í™”
  document.getElementById("keyBoxRuby").value = "0";
  document.getElementById("conquestTier").value = "none";

  // ìˆ«ì ì…ë ¥ ì´ˆê¸°í™”
  document.getElementById("honorKeyCount").value = "";
  document.getElementById("guildKeyCount").value = "";
  document.getElementById("arenaKeyCount").value = "";
  document.getElementById("raidCount").value = "";
  document.getElementById("keyBoxCount").value = "";
  document.getElementById("rubyToUse").value = "";
  document.getElementById("medalCount").value = "";

  // ê²°ê³¼ì°½ ì´ˆê¸°í™”
  document.getElementById("profit2w").innerText = "0";
  document.getElementById("profit4w").innerText = "0";
  document.getElementById("avgProfit").innerText = "0";
  document.getElementById("heroCount").innerText = "0";
  document.getElementById("avgHeroCount").innerText = "0";
  document.getElementById("accessoryDays").innerText = "0";
}

function calculateProfit() {
  const playsForLegendAccessory = 15000;
  const rubySub = document.getElementById("rubySubscription").checked;
  const keySub = document.getElementById("keySubscription").checked;
  const senaPass = document.getElementById("senaPass").checked;
  const senaPassPremium = document.getElementById("senaPass_premium").checked;
  const raid11Lev = document.getElementById("raidOver11Level").checked;
  const honorCount = parseInt(document.getElementById("honorKeyCount").value) || 0;
  const guildCount = parseInt(document.getElementById("guildKeyCount").value) || 0;
  const arenaCount = parseInt(document.getElementById("arenaKeyCount").value) || 0;
  const keyBoxRuby = parseInt(document.getElementById("keyBoxRuby").value) || 0;
  const parsedBoxCount = parseInt(document.getElementById("keyBoxCount").value);
  const keyBoxCount = isNaN(parsedBoxCount) ? 50 : parsedBoxCount;
  const raidCountPerDay = parseInt(document.getElementById("raidCount").value) || 0;
  const conquestTier = document.getElementById("conquestTier").value;
  const includeExpeditionKey = document.getElementById("includeExpeditionKey").checked;
  const rubyToUse = parseInt(document.getElementById("rubyToUse").value) || 0;
  const medalCount = parseInt(document.getElementById("medalCount").value) || 0;

  function getKeyBoxRubyCostPerDay(rubyTier, boxCount) {
    let cost = 0;
    if (rubyTier >= 50) cost += 50 * 20;
    if (rubyTier >= 80) cost += 80 * 50;
    if (rubyTier >= 100) cost += 100 * 50;
    if (rubyTier >= 120) cost += 120 * 50;
    cost -= rubyTier*(50-boxCount);
    return cost;
  }

  function getConquestRuby(tier, weeks) {
    if (weeks < 2) return 0;
    if (tier === "legend") return 6400 * (weeks / 2);
    if (tier === "rare") return 3400 * (weeks / 2);
    if (tier === "advanced") return 1400 * (weeks / 2);
    if (tier === "common") return 200 * (weeks / 2);
    return 0;
  }

  function towerOfTrialRuby(medal) {
    if (medal >= 10 && medal < 20) return 100;
    if (medal >= 20 && medal < 30) return 200;
    if (medal >= 30 && medal < 40) return 300;
    if (medal >= 40 && medal < 50) return 400;
    if (medal >= 50 && medal < 70) return 500;
    if (medal >= 70 && medal < 80) return 600;
    if (medal >= 80 && medal < 100) return 700;
    if (medal >= 100 && medal < 110) return 1000;
    if (medal >= 110) return 1500;
    return 0;
  }

 function compute(period) {
  const days = period * 7;
  const weeks = period;

  // ğŸ”¹ ì—´ì‡  ìˆ˜ê¸‰
  const naturalKeyPerDay = keySub ? 720 : 480;
  const totalNaturalKeys = naturalKeyPerDay * days;
  const keySubKeys = keySub ? (period === 2 ? 1120 : 2240) : 0;
  const keysFromSenaPass = senaPass ? (senaPassPremium ? (period === 2 ? 540 : 1080) : (period === 2 ? 240 : 480)) : 0; // êµ¬ë§¤ í›„ 2ì£¼ì•ˆì— ëë‚´ëŠ”ê±¸ ë°˜ì˜í•  ê²½ìš° senaPass ? (senaPassPremium ? 1080 : 480) : 0;
  const keysFromDailySources = (60 + 60) * days; // ì¼ì¼ì˜ë¢° + ê¸¸ë“œì¶œì„
  const keysFrom300Attendance = 24 * days; // 300ì¼ ì¶œì„í‘œ ì—´ì‡ . 10ì¼ì— 240ê°œ ì´ë¯€ë¡œ í•˜ë£¨ì— 24ê°œë¡œ ê³„ì‚°
  const keysFromShop = (honorCount + guildCount + arenaCount) * 60 * weeks; // ëª…ì˜ˆ & ê¸¸ë“œ ìƒì 
  const keysFromWeekend = 200 * weeks; // ì£¼ë§ í‘¸ì‹œ ì—´ì‡  (í† ,ì¼ 100ê°œì”©)
  const keysFromKeyBox = ((1 + 
    (keyBoxRuby >= 50 ? 20 : 0) +
    (keyBoxRuby >= 80 ? 50 : 0) +
    (keyBoxRuby >= 100 ? 50 : 0) +
    (keyBoxRuby >= 120 ? 50 : 0) - (50-keyBoxCount)) * 60) * days;

  const totalKeysBeforeRaid = totalNaturalKeys + keySubKeys + keysFromSenaPass +
    keysFromDailySources + keysFrom300Attendance + keysFromShop + keysFromWeekend + keysFromKeyBox;

  // ğŸ”¹ ë ˆì´ë“œ ì°¨ê°
  const raidKeysUsed = raid11Lev ? (raidCountPerDay * 12 * days) : (raidCountPerDay * 6 * days) ; // ë ˆì´ë“œì— ì‚¬ìš©ë˜ëŠ” ì—´ì‡  ìˆ˜. 11ë‹¨ê³„ ì´ìƒì¼ ê²½ìš° íŒë‹¹ 12ê°œ ì°¨ê°
  const keysForCholjak = totalKeysBeforeRaid - raidKeysUsed; // ë ˆì´ë“œ ì—´ì‡  ì°¨ê° í›„ ì«„ì‘ìš© ì—´ì‡ 
  // ë ˆì´ë“œ ì—´ì‡  ì†Œëª¨ëŸ‰ì´ ì´ ì—´ì‡ ë³´ë‹¤ ë§ì„ ê²½ìš° â†’ ê²½ê³  ì¶œë ¥
    if (keysForCholjak < 0) {
      raidTooltip.classList.add('visible');
      // return {
      //   netProfit: 0,
      //   heroCount: 0
      // }; // ê³„ì‚° ì¤‘ë‹¨
    } else {
      raidTooltip.classList.remove('visible');
    }

  // ğŸ”¹ ì •í™•í•œ ì«„ì‘ì›ì •ëŒ€ ë£¨í”„ ê³„ì‚° ë°©ì‹ ì ìš©
  const externalRuns = keysForCholjak / 6; // ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  ì´ì™¸ ì—´ì‡ ë¡œ ì«„ì‘ëŒë¦¬ëŠ” íšŸìˆ˜
  let totalCholjakKeys = keysForCholjak;
    if (includeExpeditionKey) {
      const choljakQuestKeys = (externalRuns / 2115) * 270; // 2160(ì«„ì‘ì›ì •ëŒ€ ë§ˆì§€ë§‰ ì‚¬ì´í´ íšŸìˆ˜) - 45(ì«„ì‘ì›ì •ëŒ€ ì—´ì‡ ë¡œ ëŒë¦´ ìˆ˜ ìˆëŠ” íšŸìˆ˜) = 2115
      totalCholjakKeys += choljakQuestKeys;

      console.log("ì›ì •ëŒ€ ì—´ì‡  ë³´ìƒ:", choljakQuestKeys);
    } else {
      console.log("ì›ì •ëŒ€ ì—´ì‡  í¬í•¨í•˜ì§€ ì•ŠìŒ");
    }

  // ì•…ëª½ ì „ì„¤ ì¥ì‹ êµ¬ ì²œì¥ ì†Œìš”ê¸°ê°„ ê³„ì‚°
  let accessoryDays = playsForLegendAccessory / ((totalCholjakKeys / 12) / days);

  // ğŸ”¹ ì«„ì‘ ë£¨ë¹„ ìˆ˜ìµ
  const keysPerRun = rubySub ? 60 : 66;
  const runs = totalCholjakKeys / keysPerRun;
  const heroCount = runs * 4;
  const rubyFromCholjak = runs * 80;

  // ğŸ”¹ ê¸°íƒ€ ë£¨ë¹„ ìˆ˜ê¸‰
  const rubyFromRubySub = rubySub ? (days * 200 + (period === 2 ? 165 : 330)) : 0;
  const rubyFromKeySubBonus = keySub ? (period === 2 ? 100 : 200) : 0;
  const rubyFromSenaPass = senaPass ? (senaPassPremium ? (period === 2 ? 1450 : 2900) : (period === 2 ? 250 : 500)) : 0; // (senaPassPremium ? 2900 : 500) : 0;
  const rubyFromDailyQuest = 100 * days;
  const rubyFrom300Attendance = 20 * days; // 300ì¼ ì¶œì„í‘œ ë£¨ë¹„. 10ì¼ì— 200ê°œ ì´ë¯€ë¡œ í•˜ë£¨ì— 20ê°œë¡œ ê³„ì‚°
  const rubyFromFreeShop = 30 * days;
  const rubyFromWeekend = 100 * weeks;
  const rubyFromConquest = getConquestRuby(conquestTier, weeks);
  const rubyFromTrial = (period === 2 ? (towerOfTrialRuby(medalCount) / 2) : towerOfTrialRuby(medalCount));

  const totalRubyIncome = rubyFromCholjak + rubyFromRubySub + rubyFromKeySubBonus +
    rubyFromSenaPass + rubyFromDailyQuest + rubyFrom300Attendance + rubyFromFreeShop + rubyFromWeekend + rubyFromConquest + rubyFromTrial;

  // ğŸ”¹ ë£¨ë¹„ ì§€ì¶œ
  const rubySpentPerDay = getKeyBoxRubyCostPerDay(keyBoxRuby,keyBoxCount);
  const rubySpent = (rubySpentPerDay + rubyToUse) * days;

  const netProfit = totalRubyIncome - rubySpent;

  console.log("ë ˆì´ë“œ ì°¨ê° ì „ ì—´ì‡ :", totalKeysBeforeRaid);
  console.log("ìì—°íšŒë³µ ì—´ì‡ :", totalNaturalKeys);
  console.log("ì›”ì •ì•¡ ì—´ì‡ :", keySubKeys);
  console.log("ì„¸ë‚˜íŒ¨ìŠ¤ ì—´ì‡ :", keysFromSenaPass);
  console.log("ì¼ì¼ì˜ë¢° & ê¸¸ë“œì¶œì„:", keysFromDailySources);
  console.log("300ì¼ ì¶œì„í‘œ ì—´ì‡ :", keysFrom300Attendance);
  console.log("ìƒì  ì—´ì‡ :", keysFromShop);
  console.log("ì«„ì‘ ì—´ì‡ :", keysForCholjak);
console.log("ì«„ì‘ íšŸìˆ˜:", runs);
console.log("2ì£¼ ë™ì•ˆ ì‚¬ìš©ë˜ëŠ” ì«„:", heroCount);

  if(keysForCholjak<0){
    return {
      netProfit,
      heroCount:0,
      accessoryDays,
    };
  } else{
      return {
        netProfit,
        heroCount,
        accessoryDays,
      };
    }
}

  const result4w = compute(4);
  document.getElementById("profit4w").innerText = Math.round(result4w.netProfit).toLocaleString();
  // document.getElementById("avgProfit").innerText = Math.floor(result4w.netProfit / 28).toLocaleString(); // 4ì£¼ê°„ ì¼í‰ê·  ìˆ˜ìµ
  document.getElementById("accessoryDays").innerText = Math.round(result4w.accessoryDays).toLocaleString();

  const result2w = compute(2);
  document.getElementById("profit2w").innerText = Math.round(result2w.netProfit).toLocaleString();
  document.getElementById("avgProfit").innerText = Math.round(result2w.netProfit / 14).toLocaleString();
  document.getElementById("heroCount").innerText = Math.floor(result2w.heroCount).toLocaleString();
  const avgHero = result2w.heroCount / 14;
  document.getElementById("avgHeroCount").innerText =
    (avgHero % 1 < 0.05 || avgHero % 1 > 0.95)
      ? Math.round(avgHero).toString()
      : avgHero.toFixed(1);
}

// ì „ì œì¡°ê±´ ì•ˆë‚´ í† ê¸€
const overlay = document.getElementById("assumptionOverlay");
const openBtn = document.getElementById("showAssumption");
const closeBtn = overlay.querySelector(".close-btn");
const assumptionBoxes = document.querySelectorAll(".assumption-box");

openBtn.addEventListener("click", () => {
  overlay.classList.add("show");
});

closeBtn.addEventListener("click", () => {
  overlay.classList.remove("show");
});

// ë°”ê¹¥ ì˜ì—­ í´ë¦­ ì‹œ ë‹«ê¸°
overlay.addEventListener("click", (e) => {
  if (e.target === overlay) {
    overlay.classList.remove("show");
  }
});

const includedItemsOverlay = document.getElementById("includedItemsOverlay");
  const showIncludedItemsBtn = document.getElementById("showIncludedItems");

  showIncludedItemsBtn.addEventListener("click", () => {
    includedItemsOverlay.classList.add("show");
  });

  function closeIncludedItems() {
    includedItemsOverlay.classList.remove("show");
  }

  includedItemsOverlay.addEventListener("click", (e) => {
    if (e.target === includedItemsOverlay) {
      includedItemsOverlay.classList.remove("show");
    }
  });

  // ì›”ì •ì•¡ ì„¤ëª…
const SubModalOverlay = document.getElementById('MonthlySubOverlay');
const openSubModalBtn = document.getElementById('openSubModal');

openSubModalBtn.addEventListener("click", () => {
  SubModalOverlay.classList.add("show");
});

function closeSubModal() {
  SubModalOverlay.classList.remove("show");
}

SubModalOverlay.addEventListener("click", (e) => {
  if (e.target === SubModalOverlay) {
    SubModalOverlay.classList.remove("show");
  }
});

// ì„¸ë‚˜íŒ¨ìŠ¤ ì„¤ëª…
const SenaPassModalOverlay = document.getElementById('SenaPassOverlay');
const openSenaPassModalBtn = document.getElementById('openSenaPassModal');

openSenaPassModalBtn.addEventListener("click", () => {
  SenaPassModalOverlay.classList.add("show");
});

function closeSenaPassModal() {
  SenaPassModalOverlay.classList.remove("show");
}

SenaPassModalOverlay.addEventListener("click", (e) => {
  if (e.target === SenaPassModalOverlay) {
    SenaPassModalOverlay.classList.remove("show");
  }
});

// ë§¤ì¼ ì‚¬ìš© ë£¨ë¹„ ì„¤ëª…
const rubyToUseModalOverlay = document.getElementById('rubyToUseOverlay');
const openrubyToUseModalBtn = document.getElementById('openRubyToUseModal');

openrubyToUseModalBtn.addEventListener("click", () => {
  rubyToUseModalOverlay.classList.add("show");
});

function closeRubyToUseModal() {
  rubyToUseModalOverlay.classList.remove("show");
}

rubyToUseModalOverlay.addEventListener("click", (e) => {
  if (e.target === rubyToUseModalOverlay) {
    rubyToUseModalOverlay.classList.remove("show");
  }
});

// ì‹œë ¨ì˜ íƒ‘ ë©”ë‹¬ ì„¤ëª…
const medalModalOverlay = document.getElementById('medalOverlay');
const openMedalModalBtn = document.getElementById('openMedalModal');

openMedalModalBtn.addEventListener("click", () => {
  medalModalOverlay.classList.add("show");
});

function closeMedalModal() {
  medalModalOverlay.classList.remove("show");
}

medalModalOverlay.addEventListener("click", (e) => {
  if (e.target === medalModalOverlay) {
    medalModalOverlay.classList.remove("show");
  }
});

// í˜ì´ì§€ì— ìˆëŠ” ëª¨ë“  ì„¤ëª…ì°½(.assumption-box)ì„ ì„ íƒí•©ë‹ˆë‹¤.
const allAssumptionBoxes = document.querySelectorAll('.assumption-box');

// ì„ íƒëœ ëª¨ë“  ì„¤ëª…ì°½ì— ëŒ€í•´ ê°ê° í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
allAssumptionBoxes.forEach(box => {
  box.addEventListener('click', function(event) {
    
    // 1. ëª¨ë°”ì¼ í™”ë©´ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤ (í™”ë©´ ë„ˆë¹„ 480px ì´í•˜)
    if (window.innerWidth <= 480) {
      
      // 2. ë§Œì•½ í´ë¦­í•œ ëŒ€ìƒì´ ë‹«ê¸°(X) ë²„íŠ¼ì´ë¼ë©´,
      //    ì¤‘ë³µ ì‹¤í–‰ì„ ë§‰ê¸° ìœ„í•´ ì—¬ê¸°ì„œ í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.
      if (event.target.closest('.close-btn')) {
        return;
      }
      
      // 3. í´ë¦­ëœ ì„¤ëª…ì°½ì˜ ë¶€ëª¨ .overlayë¥¼ ì°¾ìŠµë‹ˆë‹¤.
      const parentOverlay = this.closest('.overlay');
      
      // 4. ë¶€ëª¨ overlayë¥¼ ì°¾ì•˜ë‹¤ë©´, 'show' í´ë˜ìŠ¤ë¥¼ ì œê±°í•˜ì—¬ ì°½ì„ ë‹«ìŠµë‹ˆë‹¤.
      if (parentOverlay) {
        parentOverlay.classList.remove("show");
      }
    }
  });
});

  // ìˆ«ì ì…ë ¥ì´ ìµœëŒ€ ì´ìƒì´ë©´ ìë™ìœ¼ë¡œ ìµœëŒ€ë¡œ ë³€ê²½
function enforceMaxValue(id, max) {
  const input = document.getElementById(id);
  input.addEventListener('input', () => {
    let val = parseInt(input.value);
    if (val > max) {
      input.value = max;
    }
  });
}

// ì ìš© ëŒ€ìƒ input ìš”ì†Œ ë“±ë¡
enforceMaxValue("honorKeyCount", 7);
enforceMaxValue("guildKeyCount", 7);
enforceMaxValue("arenaKeyCount", 7);
enforceMaxValue("keyBoxCount", 50);
enforceMaxValue("medalCount", 120);

const selectBox = document.getElementById('keyBoxRuby');
const keyBoxCountContainer = document.getElementById('keyBoxCount_container');
const keyBoxCount = document.getElementById('keyBoxCount');

// 2. select ìƒìì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
selectBox.addEventListener('change', function() {
            // 3. ë§Œì•½ ì„ íƒëœ optionì˜ valueê°€ 'custom'ì´ë¼ë©´
    if (this.value === '80' || this.value === '100' || this.value === '120') {
                // ì…ë ¥ ìƒìë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
        keyBoxCountContainer.style.display = 'inline-block';
        keyBoxCount.value = '';
    } else {
                // ê·¸ ì™¸ì˜ ë‹¤ë¥¸ ì˜µì…˜ì„ ì„ íƒí–ˆë‹¤ë©´, ì…ë ¥ ìƒìë¥¼ ë‹¤ì‹œ ìˆ¨ê¹ë‹ˆë‹¤.
        keyBoxCountContainer.style.display = 'none';
        keyBoxCount.value = '';
    }});

const senaPassCheckbox = document.getElementById('senaPass');
const premiumCheckbox = document.getElementById('senaPass_premium');
const premiumOptionContainer = document.getElementById('premiumOption');

senaPassCheckbox.addEventListener('change', function() {
  if(this.checked) {
    premiumOptionContainer.style.display = 'inline-block';
  } else {
    premiumCheckbox.checked = false;
    premiumOptionContainer.style.display = 'none';
  }
});

// --- ìµœëŒ€ê°’ ì…ë ¥ ë²„íŠ¼ ê¸°ëŠ¥ ìŠ¤í¬ë¦½íŠ¸ ---
  const maxButtons = document.querySelectorAll('.max-btn');

  maxButtons.forEach(button => {
    button.addEventListener('click', function() {
      // 1. ë²„íŠ¼ì˜ 'data-target' ì†ì„±ì—ì„œ ì—°ê²°ëœ inputì˜ idë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
      const targetId = this.dataset.target;
      const targetInput = document.getElementById(targetId);

      // 2. í•´ë‹¹ inputì„ ì°¾ì•„ì„œ ê·¸ inputì˜ 'max' ì†ì„±ê°’ì„ 'value'ì— ë„£ì–´ì¤ë‹ˆë‹¤.
      if (targetInput) {
        targetInput.value = targetInput.max;
      }
    });
  });

  // í•„ìš”í•œ HTML ìš”ì†Œë“¤ì„ IDì™€ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ì„ íƒí•©ë‹ˆë‹¤.
            const medalCountInput = document.getElementById('medalCount');
            const btn90 = document.querySelector('.btn90');
            const btn120 = document.querySelector('.btn120');

            // '90ê°œ' ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            btn90.addEventListener('click', (event) => {
                // ë²„íŠ¼ì˜ ê¸°ë³¸ ë™ì‘(ì˜ˆ: form ì•ˆì— ìˆì„ ê²½ìš° form ì œì¶œ)ì„ ë§‰ìŠµë‹ˆë‹¤.
                event.preventDefault(); 
                // ì…ë ¥ ì¹¸ì˜ ê°’ì„ 90ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
                medalCountInput.value = 90;
            });

            // '120ê°œ' ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            btn120.addEventListener('click', (event) => {
                // ë²„íŠ¼ì˜ ê¸°ë³¸ ë™ì‘ì„ ë§‰ìŠµë‹ˆë‹¤.
                event.preventDefault();
                // ì…ë ¥ ì¹¸ì˜ ê°’ì„ 120ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
                medalCountInput.value = 120;
            });


// íˆ´íŒ ìì²´ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
raidTooltip.addEventListener('click', function() {
  // í´ë¦­ëœ íˆ´íŒ(this)ì—ì„œ 'visible' í´ë˜ìŠ¤ë¥¼ ì œê±°í•˜ì—¬ ìˆ¨ê¹ë‹ˆë‹¤.
  this.classList.remove('visible');
});
</script>
</body>
</html>
