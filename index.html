<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„¸ë‚˜ë¦¬ ì«„ì‘ ë£¨ë¹„ ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 600px;
      padding : 15px;
      margin-left: auto;
      margin-right: auto;
    }

    label, h3, h4, h1, select, input[type="checkbox"] {
      -webkit-user-select: none; /* Safari */
      -moz-user-select: none;    /* Firefox */
      -ms-user-select: none;     /* IE/Edge */
      user-select: none;         /* í‘œì¤€ */
    }

    h1, h3, h4 {
      color: #333;
    }

    .section {
      margin-bottom: 10px;
    }

    label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 8px 0;
    }

    input[type="number"],
    select {
      flex: 1;
      padding: 6px;
      margin-left: 10px;
    }

    input[type="checkbox"] {
      margin-right: 10px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
    }

    button:hover {
      background-color: #45a049;
    }

    .checkbox-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 20px;
      flex-direction: row;
    }

    .overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4);
  display: none;
  justify-content: center;
  align-items: center;
  animation: fadeOut 0.3s ease forwards;
  z-index: 1000;
}

.overlay.show {
  display: flex;
  animation: fadeIn 0.3s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

.assumption-box {
  background-color: #fff;
  padding: 20px;
  border-radius: 10px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  position: relative;
  animation: fadeIn 0.3s ease forwards;
}

.assumption-box h3 {
  margin-top: 0;
}

.assumption-box ul {
  padding-left: 20px;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 20px;
  cursor: pointer;
}

.title-wrapper {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: nowrap;
  gap: 10px;
  padding: 15px 30px;
  white-space: nowrap;
  overflow: hidden;
}

.title-wrapper h1 {
  font-size: clamp(18px, 5vw, 28px); /* í™”ë©´ í¬ê¸°ì— ë”°ë¼ ìë™ ì¡°ì ˆ */
  margin: 0;
  flex-shrink: 1;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
}

.assumption-button {
  background-color: #777;
  font-size: 14px;
  padding: 5px 10px;
  white-space: nowrap;
  max-width: 120px;
  min-width: 80px;
  width: auto;
  flex-shrink: 0;
}

.assumption-button:hover {
      background-color: #e06040;
    }

    @media (max-width: 480px) {
      label {
        flex-direction: nowrap;
        align-items: middle;
      }

      input[type="number"],
      select {
        margin-left: 0;
        width: 100%;
        margin-top: 5px;
      }

      button {
        width: 100%;
      }

      .checkbox-row {
        flex-direction: nowrap; /* ì„¸ë¡œ ë°°ì—´ë¡œ ì „í™˜ */
        gap: 10px;
      }
    }
  </style>
</head>
<body>

  <div class="title-wrapper">
  <h1>ì„¸ë‚˜ë¦¬ ì«„ì‘ ë£¨ë¹„ ê³„ì‚°ê¸°</h1>
  <button id="showAssumption" class="assumption-button">ì „ì œì¡°ê±´</button>
</div>

  <div id="assumptionOverlay" class="overlay">
    <div class="assumption-box">
      <span class="close-btn">&times;</span>
      <h3>ğŸ“Œ ê³„ì‚° ì „ì œì¡°ê±´</h3>
      <ul>
        <li>ì«„ì‘ì€ ëª¨í—˜ ì¼ë°˜ 14ì˜ì§€ ì´ìƒ, ì „ë³µë¥  0% ê¸°ì¤€</li>
        <li>ì—´ì‡ ë¥¼ ìµœëŒ€ ë³´ìœ ê°œìˆ˜ ì´ìƒ ë°©ì¹˜í•˜ì§€ ì•Šê³  ê³„ì† ì‚¬ìš©</li>
        <li>ì¼ì¼ ì˜ë¢°, ì„¸ë‚˜íŒ¨ìŠ¤ ë“± ì¼ì¼ í€˜ìŠ¤íŠ¸ëŠ” ëª¨ë‘ ì§„í–‰</li>
        <li>ê¸¸ë“œ ì¶œì„ ë³´ìƒ ì—´ì‡  60ê°œ</li>
        <li>ìƒì  ë¬´ë£Œìƒí’ˆ ëª¨ë‘ êµ¬ë§¤</li>
      </ul>
      <h3>ğŸ“Œ ìœ ì˜ì‚¬í•­</h3>
      <ul>
        <li>ì«„ì‘ì›ì •ëŒ€ ì—´ì‡ ëŠ” ì«„ì‘ì›ì •ëŒ€â…¡ ë§ˆì§€ë§‰ ì‚¬ì´í´ ê¸°ì¤€</li>
        <li>ì´ë ¥ì „ ë£¨ë¹„ ë³´ìƒì€ 2ì£¼ì— í•œë²ˆì”© ë°›ëŠ” ê±¸ë¡œ ê³„ì‚°</li>
        <li>ì„¸ë‚˜íŒ¨ìŠ¤ëŠ” í˜„ì¬ 4ì£¼ì— í•œë²ˆì”© ì´ˆê¸°í™”ë˜ëŠ” ìƒí™©, ì´ˆê¸°í™” ì´í›„ 12ì¼ì´ë©´ ëª¨ë“  ë³´ìƒì„ ë°›ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, 
          2ì£¼ì™€ 4ì£¼ ìˆœì´ìµì— ì„¸ë‚˜íŒ¨ìŠ¤ê°€ ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ì„œë¡œ ê°™ë„ë¡ ì²˜ë¦¬í•¨. í•œ ë²ˆì˜ ì„¸ë‚˜íŒ¨ìŠ¤ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” ëª¨ë“  ë³´ìƒìœ¼ë¡œ ê³„ì‚° (4ì£¼ ë™ì•ˆ ì„¸ë‚˜íŒ¨ìŠ¤ë¥¼ 2ë²ˆ ê±¸ì³ ì§„í–‰í•˜ëŠ” ê²½ìš°ëŠ” ê³ ë ¤í•˜ì§€ ì•ŠìŒ)
        </li>
        <li>ì¡í™”ìƒì , ì´ë ¥ì „ ì¶œì„, ì´ë²¤íŠ¸ ë³´ìƒ ë“±ì˜ ë‹¤ë¥¸ ë³€ìˆ˜ëŠ” ê³„ì‚°ì— í¬í•¨í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê³„ì‚° ì „ì œì¡°ê±´ì„ ë§Œì¡±í•œë‹¤ë©´ ì‹¤ì œ ëª¨ì„ ìˆ˜ ìˆëŠ” ë£¨ë¹„ëŠ” ê³„ì‚°ê²°ê³¼ ë³´ë‹¤ ë§ìŒ</li>
        <li>ëª¨ë“  ê³„ì‚° ê²°ê³¼ëŠ” ëŒ€ëµì ì¸ ìˆ˜ì¹˜ì´ë¯€ë¡œ 100% ì •í™•í•˜ì§€ ì•ŠìŒ</li>
      </ul>
    </div>
  </div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3>ì›”ì •ì•¡ ì—¬ë¶€</h3>
    <div class="checkbox-row">
        <label><input type="checkbox" id="rubySubscription"> ë£¨ë¹„ ì›”ì •ì•¡</label>
        <label><input type="checkbox" id="keySubscription"> ì—´ì‡  ì›”ì •ì•¡</label>
    </div>
  </div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3>ì„¸ë‚˜íŒ¨ìŠ¤</h3>
    <label><input type="checkbox" id="senaPass"> ì„¸ë‚˜íŒ¨ìŠ¤ êµ¬ë§¤í•¨</label>
  </div>

  <div class="section" style="display: flex; gap: 20px;">
    <h3>ì—´ì‡ ìƒì êµ¬ë§¤</h3>
    <label for="keyBoxRuby">
      ì‚¬ìš©í•  ë£¨ë¹„:
      <select id="keyBoxRuby">
        <option value="0">êµ¬ë§¤ ì•ˆí•¨</option>
        <option value="50">50ë£¨ë¹„ë‹¨</option>
        <option value="80">80ë£¨ë¹„ë‹¨</option>
        <option value="100">100ë£¨ë¹„ë‹¨</option>
        <option value="120">120ë£¨ë¹„ë‹¨</option>
      </select>
    </label>
  </div>

  <div class="section">
    <h4>ì¼ì£¼ì¼ ë™ì•ˆ ìƒì ì—ì„œ êµ¬ë§¤í•  ì—´ì‡  ê°œìˆ˜</h4>
    <label for="honorKeyCount">
      ëª…ì˜ˆìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <input type="number" id="honorKeyCount" min="0" max="7" placeholder="ì˜ˆ: 3">
    </label>

    <label for="guildKeyCount">
      ê¸¸ë“œìƒì  êµ¬ë§¤ íšŸìˆ˜:
      <input type="number" id="guildKeyCount" min="0" max="7" placeholder="ì˜ˆ: 2">
    </label>
  </div>

  <div class="section">
    <h3>í•˜ë£¨ ë ˆì´ë“œ íŒ ìˆ˜</h3>
    <label for="raidCount">
      ë ˆì´ë“œ íŒ ìˆ˜:
      <input type="number" id="raidCount" min="0" placeholder="ì˜ˆ: 10">
    </label>
  </div>

  <div class="section">
    <h3>ì´ë ¥ì „ í‹°ì–´</h3>
    <label for="conquestTier">
      í‹°ì–´ ì„ íƒ:
      <select id="conquestTier">
        <option value="none">ì„ íƒ ì•ˆí•¨</option>
        <option value="common">ì¼ë°˜</option>
        <option value="advanced">ê³ ê¸‰</option>
        <option value="rare">í¬ê·€</option>
        <option value="legend">ì „ì„¤</option>
      </select>
    </label>
  </div>

  <!-- âœ… ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  í¬í•¨ ì—¬ë¶€ -->
<div class="section" style="display: flex; gap: 20px;">
  <h3>ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  í¬í•¨</h3>
  <label><input type="checkbox" id="includeExpeditionKey" checked> í¬í•¨í•˜ì—¬ ê³„ì‚°</label>
</div>

  <div class="section">
    <button onclick="calculateProfit()">ğŸ’° ë£¨ë¹„ ìˆœì´ìµ ê³„ì‚°í•˜ê¸°</button>
    <h3>ğŸ“† 2ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit2w">0</span> ë£¨ë¹„</h3>
    <h3>ğŸ“† 4ì£¼ê°„ ë£¨ë¹„ ìˆœì´ìµ: <span id="profit4w">0</span> ë£¨ë¹„</h3>
    <h3>ğŸ“ˆ í•˜ë£¨ í‰ê·  ë£¨ë¹„ ìˆœì´ìµ: <span id="avgProfit">0</span> ë£¨ë¹„</h3>
    <h4>ğŸ‘¥ 2ì£¼ ë™ì•ˆ í•„ìš”í•œ ì«„ ìˆ˜: <span id="heroCount">0</span> ë§ˆë¦¬</h4>
    <h4>ğŸ“Š í•˜ë£¨ í‰ê·  í•„ìš”í•œ ì«„ ìˆ˜: <span id="avgHeroCount">0</span> ë§ˆë¦¬</h4>
  </div>
<script>
function calculateProfit() {
  const rubySub = document.getElementById("rubySubscription").checked;
  const keySub = document.getElementById("keySubscription").checked;
  const senaPass = document.getElementById("senaPass").checked;
  const honorCount = parseInt(document.getElementById("honorKeyCount").value) || 0;
  const guildCount = parseInt(document.getElementById("guildKeyCount").value) || 0;
  const keyBoxRuby = parseInt(document.getElementById("keyBoxRuby").value) || 0;
  const raidCountPerDay = parseInt(document.getElementById("raidCount").value) || 0;
  const conquestTier = document.getElementById("conquestTier").value;
  const includeExpeditionKey = document.getElementById("includeExpeditionKey").checked;

  function getKeyBoxRubyCostPerDay(rubyTier) {
    let cost = 0;
    if (rubyTier >= 50) cost += 50 * 20;
    if (rubyTier >= 80) cost += 80 * 50;
    if (rubyTier >= 100) cost += 100 * 50;
    if (rubyTier >= 120) cost += 120 * 50;
    return cost;
  }

  function getConquestRuby(tier, weeks) {
    if (weeks < 2) return 0;
    if (tier === "legend") return 6400 * (weeks / 2);
    if (tier === "rare") return 3400 * (weeks / 2);
    if (tier === "advanced") return 1400 * (weeks / 2);
    if (tier === "common") return 200 * (weeks / 2);
    return 0;
  }

 function compute(period) {
  const days = period * 7;
  const weeks = period;

  // ğŸ”¹ ì—´ì‡  ìˆ˜ê¸‰
  const naturalKeyPerDay = keySub ? 720 : 480;
  const totalNaturalKeys = naturalKeyPerDay * days;
  const keySubKeys = keySub ? (period === 2 ? 1120 : 2240) : 0;
  const keysFromSenaPass = senaPass ? 1080 : 480; // êµ¬ë§¤ í›„ 2ì£¼ì•ˆì— ëë‚¸ë‹¤ëŠ” ê°€ì • í•˜ì—(period === 2 ? 540 : 1080) : (period === 2 ? 240 : 480);
  const keysFromDailySources = (60 + 60) * days; // ì¼ì¼ì˜ë¢° + ê¸¸ë“œì¶œì„
  const keysFrom300Attendance = period === 2 ? 240 : 480; // 300ì¼ ì¶œì„í‘œ
  const keysFromShop = (honorCount + guildCount) * 60 * weeks; // ëª…ì˜ˆ & ê¸¸ë“œ ìƒì 
  const keysFromKeyBox = ((1 + 
    (keyBoxRuby >= 50 ? 20 : 0) +
    (keyBoxRuby >= 80 ? 50 : 0) +
    (keyBoxRuby >= 100 ? 50 : 0) +
    (keyBoxRuby >= 120 ? 50 : 0)) * 60) * days;

  const totalKeysBeforeRaid = totalNaturalKeys + keySubKeys + keysFromSenaPass +
    keysFromDailySources + keysFrom300Attendance + keysFromShop + keysFromKeyBox;

  // ğŸ”¹ ë ˆì´ë“œ ì°¨ê°
  const raidKeysUsed = raidCountPerDay * 6 * days; // ë ˆì´ë“œì— ì‚¬ìš©ë˜ëŠ” ì—´ì‡  ìˆ˜
  const keysForCholjak = totalKeysBeforeRaid - raidKeysUsed; // ë ˆì´ë“œ ì—´ì‡  ì°¨ê° í›„ ì«„ì‘ìš© ì—´ì‡ 

  // ğŸ”¹ ì •í™•í•œ ì«„ì‘ì›ì •ëŒ€ ë£¨í”„ ê³„ì‚° ë°©ì‹ ì ìš©
  const externalRuns = keysForCholjak / 6; // ì«„ì‘ì›ì •ëŒ€ ì—´ì‡  ì´ì™¸ ì—´ì‡ ë¡œ ì«„ì‘ëŒë¦¬ëŠ” íšŸìˆ˜
  let totalCholjakKeys = keysForCholjak;
    if (includeExpeditionKey) {
      const choljakQuestKeys = (externalRuns / 2115) * 270;
      totalCholjakKeys += choljakQuestKeys;

      console.log("ì›ì •ëŒ€ ì—´ì‡  ë³´ìƒ:", choljakQuestKeys);
    } else {
      console.log("ì›ì •ëŒ€ ì—´ì‡  í¬í•¨í•˜ì§€ ì•ŠìŒ");
    }

  // ğŸ”¹ ì«„ì‘ ë£¨ë¹„ ìˆ˜ìµ
  const keysPerRun = rubySub ? 60 : 66;
  const runs = Math.floor(totalCholjakKeys / keysPerRun);
  const heroCount = runs * 4;
  const rubyFromCholjak = runs * 80;

  // ğŸ”¹ ê¸°íƒ€ ë£¨ë¹„ ìˆ˜ê¸‰
  const rubyFromRubySub = rubySub ? (days * 200 + (period === 2 ? 165 : 330)) : 0;
  const rubyFromKeySubBonus = keySub ? (period === 2 ? 100 : 200) : 0;
  const rubyFromSenaPass = senaPass ? (period === 2 ? 1450 : 2900) : (period === 2 ? 250 : 500);
  const rubyFromDailyQuest = 100 * days;
  const rubyFromFreeShop = 30 * days;
  const rubyFromWeekend = 100 * weeks;
  const rubyFromConquest = getConquestRuby(conquestTier, weeks);

  const totalRubyIncome = rubyFromCholjak + rubyFromRubySub + rubyFromKeySubBonus +
    rubyFromSenaPass + rubyFromDailyQuest + rubyFromFreeShop + rubyFromWeekend + rubyFromConquest;

  // ğŸ”¹ ë£¨ë¹„ ì§€ì¶œ
  const rubySpentPerDay = getKeyBoxRubyCostPerDay(keyBoxRuby);
  const rubySpent = rubySpentPerDay * days;

  const netProfit = totalRubyIncome - rubySpent;

  console.log("ë ˆì´ë“œ ì°¨ê° ì „ ì—´ì‡ :", totalKeysBeforeRaid);
  console.log("ìì—°íšŒë³µ ì—´ì‡ :", totalNaturalKeys);
  console.log("ì›”ì •ì•¡ ì—´ì‡ :", keySubKeys);
  console.log("ì„¸ë‚˜íŒ¨ìŠ¤ ì—´ì‡ :", keysFromSenaPass);
  console.log("ì¼ì¼ì˜ë¢° & ê¸¸ë“œì¶œì„:", keysFromDailySources);
  console.log("300ì¼ ì¶œì„í‘œ ì—´ì‡ :", keysFrom300Attendance);
  console.log("ìƒì  ì—´ì‡ :", keysFromShop);
  console.log("ìƒì  ì—´ì‡  ìƒì:", keysFromKeyBox);
console.log("ì«„ì‘ì— ì“¸ ì—´ì‡ :", keysForCholjak);
console.log("ì«„ì‘ ì´ ë£¨ë¹„:", rubyFromCholjak);
  return {
    netProfit,
    heroCount
  };
}

  const result2w = compute(2);
  const result4w = compute(4);

  document.getElementById("profit2w").innerText = Math.floor(result2w.netProfit).toLocaleString();
  document.getElementById("profit4w").innerText = Math.floor(result4w.netProfit).toLocaleString();
  document.getElementById("avgProfit").innerText = Math.floor(result2w.netProfit / 14).toLocaleString();
  document.getElementById("heroCount").innerText = Math.floor(result2w.heroCount).toLocaleString();
  document.getElementById("avgHeroCount").innerText = Math.floor(result2w.heroCount / 14).toLocaleString();
}

// ì „ì œì¡°ê±´ ì•ˆë‚´ í† ê¸€
const overlay = document.getElementById("assumptionOverlay");
const openBtn = document.getElementById("showAssumption");
const closeBtn = overlay.querySelector(".close-btn");

openBtn.addEventListener("click", () => {
  overlay.classList.add("show");
});

closeBtn.addEventListener("click", () => {
  overlay.classList.remove("show");
});

// ë°”ê¹¥ ì˜ì—­ í´ë¦­ ì‹œ ë‹«ê¸°
overlay.addEventListener("click", (e) => {
  if (e.target === overlay) {
    overlay.classList.remove("show");
  }
});
</script>
</body>
</html>

